{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Hutech Solutions\\\\Downloads\\\\28-7.40am-update (5)\\\\src\\\\App.tsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$(),\n  _s4 = $RefreshSig$(),\n  _s5 = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { marked } from 'marked';\nimport './App.css';\nimport Navigation from './components/Navigation';\nimport { jsPDF } from 'jspdf';\nimport html2canvas from 'html2canvas';\nimport { Document as DocxDocument, Packer, Paragraph, HeadingLevel, TextRun, ExternalHyperlink, Table as DocxTable, TableRow, TableCell, WidthType } from 'docx';\nimport { User, Building, Settings, Briefcase, BarChart, Trophy, Laptop, Phone } from \"lucide-react\";\n\n// Configure marked for better rendering and security\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nmarked.setOptions({\n  async: false,\n  breaks: true,\n  // Convert line breaks to <br>\n  gfm: true // GitHub Flavored Markdown\n});\nfunction App() {\n  _s();\n  const [messages, setMessages] = useState([{\n    id: 1,\n    text: \"Hello! I am your AI assistant. How can I help you today?\",\n    isUser: false,\n    timestamp: new Date()\n  }]);\n  const [inputValue, setInputValue] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const [currentPage, setCurrentPage] = useState('client');\n  const [showMenu, setShowMenu] = useState(false);\n  const menuRef = useRef(null);\n\n  // Auto-scroll to bottom when new messages are added\n  useEffect(() => {\n    if (currentPage === 'chat') {\n      const scrollToBottom = () => {\n        window.scrollTo({\n          top: document.body.scrollHeight,\n          behavior: 'smooth'\n        });\n      };\n      // Small delay to ensure DOM is updated\n      setTimeout(scrollToBottom, 100);\n    }\n  }, [messages, currentPage]);\n\n  // Close menu when clicking outside\n  useEffect(() => {\n    const handleClickOutside = event => {\n      if (menuRef.current && !menuRef.current.contains(event.target)) {\n        setShowMenu(false);\n      }\n    };\n    if (showMenu) {\n      document.addEventListener('mousedown', handleClickOutside);\n    }\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, [showMenu]);\n  const questionCards = [{\n    icon: /*#__PURE__*/_jsxDEV(User, {\n      size: 20\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 13\n    }, this),\n    title: 'CEO',\n    description: 'who is the CEO?',\n    category: 'About'\n  }, {\n    icon: /*#__PURE__*/_jsxDEV(Building, {\n      size: 20\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 13\n    }, this),\n    title: 'Offices',\n    description: 'Where are our offices?',\n    category: 'Location'\n  }, {\n    icon: /*#__PURE__*/_jsxDEV(Settings, {\n      size: 20\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 13\n    }, this),\n    title: 'Services',\n    description: 'What services do we provide?',\n    category: 'Services'\n  }, {\n    icon: /*#__PURE__*/_jsxDEV(Briefcase, {\n      size: 20\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 13\n    }, this),\n    title: 'Industries',\n    description: 'What industries do we serve?',\n    category: 'Industries'\n  }, {\n    icon: /*#__PURE__*/_jsxDEV(BarChart, {\n      size: 20\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 13\n    }, this),\n    title: 'Stats',\n    description: 'What are some impressive stats about Hutech?',\n    category: 'Statistics'\n  }, {\n    icon: /*#__PURE__*/_jsxDEV(Trophy, {\n      size: 20\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 13\n    }, this),\n    title: 'Certifications',\n    description: 'What certifications do we have?',\n    category: 'Qualifications'\n  }, {\n    icon: /*#__PURE__*/_jsxDEV(Laptop, {\n      size: 20\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 13\n    }, this),\n    title: 'Tech Stack',\n    description: 'What is our tech stack?',\n    category: 'Technology'\n  }, {\n    icon: /*#__PURE__*/_jsxDEV(Phone, {\n      size: 20\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 13\n    }, this),\n    title: 'Contact',\n    description: 'Give me your contact details.',\n    category: 'Contact'\n  }];\n  // Helper function to validate and sanitize BotResponse data\n  const validateBotResponse = response => {\n    return {\n      answer: typeof response.answer === 'string' ? response.answer : '',\n      related_content: Array.isArray(response.related_content) ? response.related_content.filter(item => item && typeof item.title === 'string' && typeof item.url === 'string') : undefined,\n      recommendations: Array.isArray(response.recommendations) ? response.recommendations.filter(item => typeof item === 'string') : undefined,\n      file_links: Array.isArray(response.file_links) ? response.file_links.filter(item => item && typeof item.title === 'string' && typeof item.url === 'string') : undefined,\n      tables: Array.isArray(response.tables) ? response.tables.filter(table => table && typeof table.title === 'string' && Array.isArray(table.headers) && Array.isArray(table.rows)) : undefined\n    };\n  };\n\n  // Helper function to parse JSON responses with multiple format support\n  const parseJsonResponse = jsonData => {\n    // Handle different JSON response formats\n\n    // Format 1: { response: { answer: \"...\", ... } }\n    if (jsonData.response && typeof jsonData.response === 'object') {\n      const rawResponse = {\n        answer: jsonData.response.answer || jsonData.response.text || '',\n        related_content: jsonData.response.related_content || jsonData.response.relatedContent,\n        recommendations: jsonData.response.recommendations || jsonData.response.suggestions,\n        file_links: jsonData.response.file_links || jsonData.response.fileLinks || jsonData.response.files,\n        tables: jsonData.response.tables\n      };\n      return validateBotResponse(rawResponse);\n    }\n\n    // Format 2: { answer: \"...\", ... } (direct format)\n    if (jsonData.answer || jsonData.text || jsonData.message) {\n      const rawResponse = {\n        answer: jsonData.answer || jsonData.text || jsonData.message,\n        related_content: jsonData.related_content || jsonData.relatedContent,\n        recommendations: jsonData.recommendations || jsonData.suggestions,\n        file_links: jsonData.file_links || jsonData.fileLinks || jsonData.files,\n        tables: jsonData.tables\n      };\n      return validateBotResponse(rawResponse);\n    }\n\n    // Format 3: { data: { ... } }\n    if (jsonData.data && typeof jsonData.data === 'object') {\n      return parseJsonResponse(jsonData.data);\n    }\n\n    // Format 4: Array format [{ answer: \"...\" }]\n    if (Array.isArray(jsonData) && jsonData.length > 0) {\n      return parseJsonResponse(jsonData[0]);\n    }\n\n    // Format 5: String response wrapped in object\n    if (typeof jsonData === 'string') {\n      return validateBotResponse({\n        answer: jsonData\n      });\n    }\n\n    // Fallback: stringify the entire object\n    return validateBotResponse({\n      answer: JSON.stringify(jsonData, null, 2)\n    });\n  };\n\n  // Helper function to parse text responses and detect if they contain JSON\n  const parseTextResponse = textData => {\n    const trimmedText = textData.trim();\n\n    // Check if the text might be JSON\n    if (trimmedText.startsWith('{') && trimmedText.endsWith('}') || trimmedText.startsWith('[') && trimmedText.endsWith(']')) {\n      try {\n        const parsed = JSON.parse(trimmedText);\n        return parseJsonResponse(parsed);\n      } catch (e) {\n        // If JSON parsing fails, treat as markdown/text\n        console.warn('Text looks like JSON but failed to parse:', e);\n      }\n    }\n\n    // Check for common structured text patterns and convert to proper format\n    const processedText = preprocessTextResponse(trimmedText);\n    return validateBotResponse({\n      answer: processedText\n    });\n  };\n\n  // Helper function to preprocess text responses for better rendering\n  const preprocessTextResponse = text => {\n    // Handle common formatting patterns\n    let processed = text;\n\n    // Convert **bold** to proper markdown\n    processed = processed.replace(/\\*\\*(.*?)\\*\\*/g, '**$1**');\n\n    // Convert __bold__ to proper markdown\n    processed = processed.replace(/__(.*?)__/g, '**$1**');\n\n    // Convert *italic* to proper markdown\n    processed = processed.replace(/\\*(.*?)\\*/g, '*$1*');\n\n    // Fix line breaks and spacing\n    processed = processed.replace(/\\\\n/g, '\\n');\n    processed = processed.replace(/\\n\\s*\\n\\s*\\n/g, '\\n\\n');\n    // Convert common bullet symbols to '-' at line start\n    processed = processed.replace(/^\\s*[•–]\\s+/gm, '- ');\n    // Ensure a blank line before any list (handles indented bullets and numbers)\n    processed = processed.replace(/([^\\n])\\n(\\s*[-*+]\\s)/g, '$1\\n\\n$2');\n    processed = processed.replace(/([^\\n])\\n(\\s*\\d+\\.\\s)/g, '$1\\n\\n$2');\n\n    // Line-wise normalization to preserve horizontal rules (---) while fixing bullets\n    const lines = processed.split(/\\n/);\n    const normalized = lines.map(line => {\n      const trimmed = line.trim();\n      // Detect HR: three or more -, _, or * with only spaces between\n      if (/^[-_*](\\s*[-_*]){2,}$/.test(trimmed)) {\n        return '---';\n      }\n      // Bullet like '-' or '*' or '+' with missing/extra spaces (but not HR)\n      const bulletMatch = line.match(/^(\\s*)[-*+]\\s*(.+)$/);\n      if (bulletMatch) {\n        const indent = bulletMatch[1];\n        const content = bulletMatch[2];\n        return `${indent}- ${content}`;\n      }\n      // Numbered list normalization\n      const numMatch = line.match(/^(\\s*)(\\d+)\\.\\s*(.+)$/);\n      if (numMatch) {\n        const indent = numMatch[1];\n        const num = numMatch[2];\n        const content = numMatch[3];\n        return `${indent}${num}. ${content}`;\n      }\n      return line;\n    }).join('\\n');\n    processed = normalized;\n\n    // Handle headers that might not have proper spacing\n    processed = processed.replace(/^(#+)(\\S)/gm, '$1 $2');\n\n    // De-duplicate consecutive identical headings (e.g., repeated H1/H2 lines)\n    const lines2 = processed.split('\\n');\n    const out = [];\n    let lastHeadingText = '';\n    for (const ln of lines2) {\n      const m = ln.match(/^(#+)\\s+(.*)$/);\n      if (m) {\n        const current = m[2].trim();\n        if (current.toLowerCase() === lastHeadingText.toLowerCase()) {\n          continue;\n        }\n        lastHeadingText = current;\n        out.push(ln);\n      } else {\n        lastHeadingText = '';\n        out.push(ln);\n      }\n    }\n    processed = out.join('\\n');\n    return processed.trim();\n  };\n  const sendMessage = async query => {\n    const messageText = query || inputValue.trim();\n    if (!messageText) return;\n\n    // Switch to chat page immediately\n    setCurrentPage('chat');\n    const userMessage = {\n      id: Date.now(),\n      text: messageText,\n      isUser: true,\n      timestamp: new Date()\n    };\n    setMessages(prev => [...prev, userMessage]);\n    setInputValue('');\n    setIsLoading(true);\n    try {\n      // Use environment variable for API endpoint, fallback to localhost\n      const apiEndpoint = process.env.REACT_APP_API_ENDPOINT || 'http://localhost:3001/query';\n      const response = await fetch(apiEndpoint, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          query: messageText\n        })\n      });\n      if (!response.ok) {\n        const errorText = await response.text();\n        throw new Error(`HTTP error! status: ${response.status}. Response: ${errorText}`);\n      }\n\n      // Try to parse as JSON first, fallback to text\n      let botResponse;\n      const contentType = response.headers.get('content-type');\n      try {\n        if (contentType && contentType.includes('application/json')) {\n          const jsonData = await response.json();\n          botResponse = parseJsonResponse(jsonData);\n        } else {\n          const textData = await response.text();\n          botResponse = parseTextResponse(textData);\n        }\n      } catch (parseError) {\n        console.warn('Failed to parse response, using fallback:', parseError);\n        const fallbackText = await response.text().catch(() => 'Failed to get response');\n        botResponse = {\n          answer: fallbackText\n        };\n      }\n      const botMessage = {\n        id: Date.now() + 1,\n        text: botResponse.answer || \"Sorry, I couldn't process your request.\",\n        isUser: false,\n        timestamp: new Date(),\n        response: botResponse,\n        query: messageText // Store the user's question\n      };\n      setMessages(prev => [...prev, botMessage]);\n    } catch (error) {\n      console.error('Error sending message:', error);\n\n      // Provide helpful error message based on error type\n      let errorText = \"Sorry, I encountered an error while processing your request.\";\n      let debugInfo = '';\n      if (error instanceof TypeError && error.message === 'Failed to fetch') {\n        errorText = \"Unable to connect to the backend server. Please check if the API server is running and accessible.\";\n        debugInfo = 'Network connection failed';\n      } else if (error instanceof SyntaxError) {\n        errorText = \"Received an invalid response format from the server.\";\n        debugInfo = 'JSON parsing error';\n      } else if (error instanceof Error) {\n        errorText = `Server error: ${error.message}`;\n        debugInfo = error.message;\n      }\n\n      // Log detailed error information for debugging\n      console.warn('Chat error details:', {\n        error: error,\n        message: messageText,\n        timestamp: new Date().toISOString(),\n        debugInfo: debugInfo\n      });\n      const errorMessage = {\n        id: Date.now() + 1,\n        text: errorText,\n        isUser: false,\n        timestamp: new Date(),\n        query: messageText\n      };\n      setMessages(prev => [...prev, errorMessage]);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  const handleSuggestionClick = suggestion => {\n    setInputValue(suggestion);\n    setTimeout(() => {\n      sendMessage(suggestion);\n    }, 100);\n  };\n  const handleCardClick = card => {\n    sendMessage(card.description);\n  };\n  const handleFormSubmit = e => {\n    e.preventDefault();\n    sendMessage();\n  };\n  const clearChat = () => {\n    setMessages([{\n      id: 1,\n      text: \"Hello! I am your AI assistant. How can I help you today?\",\n      isUser: false,\n      timestamp: new Date()\n    }]);\n    setInputValue('');\n    setCurrentPage('client');\n    setShowMenu(false);\n  };\n  const newChat = () => {\n    setCurrentPage('client');\n    setInputValue('');\n    setShowMenu(false);\n  };\n  const handleNavigation = page => {\n    setCurrentPage(page);\n    setShowMenu(false);\n  };\n  if (currentPage === 'client') {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"client-page\",\n      children: [/*#__PURE__*/_jsxDEV(Navigation, {\n        currentPage: currentPage,\n        onNavigate: handleNavigation\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 479,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n        className: \"client-main\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"welcome-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"welcome-title\",\n            children: [\"Your AI Partner, \", /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"husqy-text\",\n              children: \"Husqy\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 485,\n              columnNumber: 32\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 484,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"welcome-subtitle\",\n            children: \"I'm here to help you explore Hutech Solutions' cutting-edge technology and IT services. Whether you're curious about our cutting-edge technology or need details on our IT services, feel free to ask.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 487,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 483,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"client-search-container\",\n          children: /*#__PURE__*/_jsxDEV(\"form\", {\n            onSubmit: handleFormSubmit,\n            className: \"client-search-form\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"search-input-wrapper\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                placeholder: \" Ask me anything...\",\n                value: inputValue,\n                onChange: e => setInputValue(e.target.value),\n                disabled: isLoading,\n                className: `client-search-input${isLoading ? ' searching' : ''}`\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 496,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: inputValue.trim() ? 'submit' : 'button',\n                onClick: !inputValue.trim() && !isLoading ? () => console.log('Voice input placeholder clicked') : undefined,\n                className: `search-send-button${isLoading ? ' searching' : ''}`,\n                disabled: isLoading,\n                children: isLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"searching-animation\",\n                  \"aria-label\": \"Loading\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"dot\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 512,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"dot\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 513,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"dot\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 514,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 511,\n                  columnNumber: 21\n                }, this) : inputValue.trim() ? /*#__PURE__*/_jsxDEV(\"svg\", {\n                  xmlns: \"http://www.w3.org/2000/svg\",\n                  fill: \"none\",\n                  viewBox: \"0 0 24 24\",\n                  strokeWidth: \"2\",\n                  stroke: \"currentColor\",\n                  className: \"w-5 h-5\",\n                  children: /*#__PURE__*/_jsxDEV(\"path\", {\n                    strokeLinecap: \"round\",\n                    strokeLinejoin: \"round\",\n                    d: \"M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 518,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 517,\n                  columnNumber: 21\n                }, this) : /*#__PURE__*/_jsxDEV(\"svg\", {\n                  xmlns: \"http://www.w3.org/2000/svg\",\n                  viewBox: \"0 0 24 24\",\n                  fill: \"currentColor\",\n                  className: \"w-5 h-5\",\n                  children: [/*#__PURE__*/_jsxDEV(\"path\", {\n                    d: \"M12 14a3 3 0 003-3V7a3 3 0 10-6 0v4a3 3 0 003 3z\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 522,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n                    d: \"M19 11a1 1 0 10-2 0 5 5 0 11-10 0 1 1 0 10-2 0 7 7 0 006 6.92V21a1 1 0 102 0v-3.08A7 7 0 0019 11z\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 523,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 521,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 504,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 495,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 494,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 493,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"question-cards-container\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"question-cards-scroll\",\n            children: questionCards.map((card, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"question-card-horizontal\",\n              onClick: () => handleCardClick(card),\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"card-icon\",\n                children: card.icon\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 540,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"card-content\",\n                children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                  className: \"card-title\",\n                  children: card.title\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 542,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"card-description\",\n                  children: card.description\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 543,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 541,\n                columnNumber: 19\n              }, this)]\n            }, index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 535,\n              columnNumber: 17\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 533,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 532,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 482,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 478,\n      columnNumber: 7\n    }, this);\n  }\n\n  // Chat Page\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-white body\",\n    id: \"body\",\n    children: [/*#__PURE__*/_jsxDEV(Navigation, {\n      currentPage: currentPage,\n      onNavigate: handleNavigation\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 557,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"chat-history\",\n      className: \"chat-history-container\",\n      children: [messages.map(message => /*#__PURE__*/_jsxDEV(\"div\", {\n        children: message.isUser ? /*#__PURE__*/_jsxDEV(UserMessage, {\n          text: message.text\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 563,\n          columnNumber: 15\n        }, this) : /*#__PURE__*/_jsxDEV(BotMessage, {\n          message: message,\n          onSuggestionClick: handleSuggestionClick\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 565,\n          columnNumber: 15\n        }, this)\n      }, message.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 561,\n        columnNumber: 11\n      }, this)), isLoading && /*#__PURE__*/_jsxDEV(LoadingMessage, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 570,\n        columnNumber: 23\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 559,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"sticky bottom-0 bg-white py-4 chat-input-sticky\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chat-search-container\",\n        children: /*#__PURE__*/_jsxDEV(\"form\", {\n          id: \"chat-form\",\n          className: \"chat-search-form\",\n          onSubmit: handleFormSubmit,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"chat-input-wrapper\",\n            ref: menuRef,\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              id: \"user-input\",\n              type: \"text\",\n              placeholder: \" Ask me anything...\",\n              value: inputValue,\n              onChange: e => setInputValue(e.target.value),\n              disabled: isLoading,\n              className: `chat-search-input${isLoading ? ' searching' : ''}`\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 578,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: inputValue.trim() ? 'submit' : 'button',\n              onClick: !inputValue.trim() && !isLoading ? () => console.log('Voice input placeholder clicked') : undefined,\n              className: `chat-send-button${isLoading ? ' searching' : ''}`,\n              disabled: isLoading,\n              children: isLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"searching-animation\",\n                \"aria-label\": \"Loading\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"dot\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 619,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"dot\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 620,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"dot\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 621,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 618,\n                columnNumber: 19\n              }, this) : inputValue.trim() ? /*#__PURE__*/_jsxDEV(\"svg\", {\n                xmlns: \"http://www.w3.org/2000/svg\",\n                fill: \"none\",\n                viewBox: \"0 0 24 24\",\n                strokeWidth: \"2\",\n                stroke: \"currentColor\",\n                className: \"w-5 h-5\",\n                children: /*#__PURE__*/_jsxDEV(\"path\", {\n                  strokeLinecap: \"round\",\n                  strokeLinejoin: \"round\",\n                  d: \"M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 625,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 624,\n                columnNumber: 19\n              }, this) : /*#__PURE__*/_jsxDEV(\"svg\", {\n                xmlns: \"http://www.w3.org/2000/svg\",\n                viewBox: \"0 0 24 24\",\n                fill: \"currentColor\",\n                className: \"w-5 h-5\",\n                children: [/*#__PURE__*/_jsxDEV(\"path\", {\n                  d: \"M12 14a3 3 0 003-3V7a3 3 0 10-6 0v4a3 3 0 003 3z\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 629,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n                  d: \"M19 11a1 1 0 10-2 0 5 5 0 11-10 0 1 1 0 10-2 0 7 7 0 006 6.92V21a1 1 0 102 0v-3.08A7 7 0 0019 11z\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 630,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 628,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 611,\n              columnNumber: 15\n            }, this), showMenu && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"chat-menu-dropdown\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: clearChat,\n                className: \"menu-item\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"menu-icon\",\n                  children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                    xmlns: \"http://www.w3.org/2000/svg\",\n                    fill: \"none\",\n                    viewBox: \"0 0 24 24\",\n                    strokeWidth: \"1.5\",\n                    stroke: \"currentColor\",\n                    className: \"w-5 h-5\",\n                    children: /*#__PURE__*/_jsxDEV(\"path\", {\n                      strokeLinecap: \"round\",\n                      strokeLinejoin: \"round\",\n                      d: \"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 643,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 642,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 641,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Clear Chat\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 646,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 637,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 636,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 577,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 576,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 575,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 574,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 556,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"djRQWXr1sgx+paTVgkjCISb+nmo=\");\n_c = App;\nconst UserMessage = ({\n  text\n}) => {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex justify-end\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"rounded-xl rounded-br-none p-4 shadow-md chat-bubble-user prose text-sm max-w-lg\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        dangerouslySetInnerHTML: {\n          __html: marked(text)\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 662,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 661,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 660,\n    columnNumber: 5\n  }, this);\n};\n_c2 = UserMessage;\nconst MessageActions = ({\n  message\n}) => {\n  _s2();\n  const [showExportDropdown, setShowExportDropdown] = useState(false);\n  const [showShareModal, setShowShareModal] = useState(false);\n  const [isLiked, setIsLiked] = useState(false);\n  const [isDisliked, setIsDisliked] = useState(false);\n  const dropdownRef = useRef(null);\n\n  // Close export dropdown when clicking outside\n  useEffect(() => {\n    const handleClickOutside = event => {\n      if (dropdownRef.current && !dropdownRef.current.contains(event.target)) {\n        setShowExportDropdown(false);\n      }\n    };\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, []);\n  const copyToClipboard = text => {\n    return new Promise((resolve, reject) => {\n      // Try modern clipboard API first, but with proper error handling\n      if (navigator.clipboard && window.isSecureContext) {\n        navigator.clipboard.writeText(text).then(() => resolve()).catch(() => {\n          // If clipboard API fails, fall back to textarea method\n          fallbackCopyTextToClipboard(text, resolve, reject);\n        });\n      } else {\n        // Use fallback method directly\n        fallbackCopyTextToClipboard(text, resolve, reject);\n      }\n    });\n  };\n  const fallbackCopyTextToClipboard = (text, resolve, reject) => {\n    const textArea = document.createElement('textarea');\n    textArea.value = text;\n\n    // Make the textarea out of viewport but still accessible\n    textArea.style.position = 'fixed';\n    textArea.style.left = '-999999px';\n    textArea.style.top = '-999999px';\n    textArea.style.width = '2em';\n    textArea.style.height = '2em';\n    textArea.style.padding = '0';\n    textArea.style.border = 'none';\n    textArea.style.outline = 'none';\n    textArea.style.boxShadow = 'none';\n    textArea.style.background = 'transparent';\n    textArea.setAttribute('readonly', '');\n    textArea.style.userSelect = 'text';\n    document.body.appendChild(textArea);\n\n    // Focus and select with better browser compatibility\n    if (textArea.select) {\n      textArea.focus();\n      textArea.select();\n    } else if (textArea.setSelectionRange) {\n      textArea.focus();\n      textArea.setSelectionRange(0, textArea.value.length);\n    }\n    try {\n      const successful = document.execCommand('copy');\n      document.body.removeChild(textArea);\n      if (successful) {\n        resolve();\n      } else {\n        // Final fallback: try selection API\n        try {\n          const selection = window.getSelection();\n          const range = document.createRange();\n          range.selectNodeContents(textArea);\n          selection === null || selection === void 0 ? void 0 : selection.removeAllRanges();\n          selection === null || selection === void 0 ? void 0 : selection.addRange(range);\n          const copySuccess = document.execCommand('copy');\n          selection === null || selection === void 0 ? void 0 : selection.removeAllRanges();\n          if (copySuccess) {\n            resolve();\n          } else {\n            reject(new Error('All copy methods failed'));\n          }\n        } catch (selectionError) {\n          reject(new Error('Copy command and selection both failed'));\n        }\n      }\n    } catch (err) {\n      document.body.removeChild(textArea);\n      reject(err);\n    }\n  };\n  const handleCopy = () => {\n    var _message$text, _message$response, _message$response2, _message$response3;\n    let textToCopy = '';\n\n    // Add question (if available from message context)\n    if (message.query) {\n      textToCopy += `Question: ${message.query}\\n\\n`;\n    }\n\n    // Add answer in plain text\n    const answerText = ((_message$text = message.text) === null || _message$text === void 0 ? void 0 : _message$text.replace(/<[^>]*>/g, '')) || '';\n    textToCopy += `Answer:\\n${answerText}\\n\\n`;\n\n    // Add related content images if available\n    if ((_message$response = message.response) !== null && _message$response !== void 0 && _message$response.related_content && message.response.related_content.length > 0) {\n      const itemsWithImages = message.response.related_content.filter(item => item.image);\n      if (itemsWithImages.length > 0) {\n        textToCopy += 'Related Images:\\n';\n        itemsWithImages.forEach(item => {\n          textToCopy += `${item.title}: ${item.image}\\n`;\n        });\n        textToCopy += '\\n';\n      }\n    }\n\n    // Add file links if available\n    if ((_message$response2 = message.response) !== null && _message$response2 !== void 0 && _message$response2.file_links && message.response.file_links.length > 0) {\n      textToCopy += 'File Links:\\n';\n      message.response.file_links.forEach(link => {\n        textToCopy += `${link.title}: ${link.url}\\n`;\n      });\n      textToCopy += '\\n';\n    }\n\n    // Add related content page URLs\n    if ((_message$response3 = message.response) !== null && _message$response3 !== void 0 && _message$response3.related_content && message.response.related_content.length > 0) {\n      textToCopy += 'Related Pages:\\n';\n      message.response.related_content.forEach(item => {\n        textToCopy += `${item.title}: ${item.url}\\n`;\n      });\n    }\n    copyToClipboard(textToCopy).then(() => {\n      alert('Content copied to clipboard!');\n    }).catch(err => {\n      console.error('Copy failed:', err);\n      // Show the content in a modal or alert for manual copying\n      const copyText = `Copy failed due to browser restrictions. Please manually copy this content:\\n\\n${textToCopy}`;\n      alert(copyText);\n    });\n  };\n  const buildShareText = () => {\n    var _message$text2;\n    const answerText = ((_message$text2 = message.text) === null || _message$text2 === void 0 ? void 0 : _message$text2.replace(/<[^>]*>/g, '')) || '';\n    let text = '';\n    if (message.query) text += `Question: ${message.query}\\n\\n`;\n    text += `Answer:\\n${answerText}`;\n    return text;\n  };\n  const openShareModal = () => setShowShareModal(true);\n  const closeShareModal = () => setShowShareModal(false);\n  const handleShareWhatsApp = () => {\n    try {\n      const shareText = buildShareText();\n      const url = `https://api.whatsapp.com/send?text=${encodeURIComponent(shareText)}`;\n      window.open(url, '_blank');\n      closeShareModal();\n    } catch (error) {\n      console.error('WhatsApp share failed:', error);\n      alert('Unable to open WhatsApp.');\n    }\n  };\n  const handleShareFacebook = () => {\n    try {\n      const shareUrl = encodeURIComponent(window.location.href);\n      const quote = encodeURIComponent(message.query || '');\n      const url = `https://www.facebook.com/sharer/sharer.php?u=${shareUrl}&quote=${quote}`;\n      window.open(url, '_blank');\n      closeShareModal();\n    } catch (error) {\n      console.error('Facebook share failed:', error);\n      alert('Unable to open Facebook.');\n    }\n  };\n  const handleShareX = () => {\n    try {\n      const url = encodeURIComponent(window.location.href);\n      const text = encodeURIComponent((message.query ? message.query + ' — ' : '') + 'via Husqy');\n      const intent = `https://twitter.com/intent/tweet?text=${text}&url=${url}`;\n      window.open(intent, '_blank');\n      closeShareModal();\n    } catch (error) {\n      console.error('X share failed:', error);\n      alert('Unable to open X.');\n    }\n  };\n  const handleShareEmail = () => {\n    try {\n      const subject = message.query || 'Shared from Husqy';\n      const body = buildShareText() + `\\n\\n${window.location.href}`;\n      const mailto = `mailto:?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;\n      window.location.href = mailto;\n      closeShareModal();\n    } catch (error) {\n      console.error('Email share failed:', error);\n      alert('Email share failed.');\n    }\n  };\n  const handleCopyLink = () => {\n    const link = window.location.href;\n    copyToClipboard(link).then(() => alert('Link copied!')).catch(() => alert(link));\n  };\n  const generatePDF = async () => {\n    try {\n      const buildExportHtml = () => {\n        var _message$response4, _message$response5, _message$response6, _message$response7;\n        const htmlAnswer = safeRenderMarkdown(renderIcons(renderTables(message.text || '', ((_message$response4 = message.response) === null || _message$response4 === void 0 ? void 0 : _message$response4.tables) || [])));\n        const relatedImages = (((_message$response5 = message.response) === null || _message$response5 === void 0 ? void 0 : _message$response5.related_content) || []).filter(i => i.image).map(i => `<div style=\"margin: 10px 0;\">\n              <div style=\"font-weight:600;color:#374151;margin-bottom:6px;\">${i.title}</div>\n              <img src=\"${i.image}\" alt=\"${i.title}\" style=\"max-width:100%;height:auto;border:1px solid #e5e7eb;border-radius:8px\"/>\n            </div>`).join('');\n        const files = (((_message$response6 = message.response) === null || _message$response6 === void 0 ? void 0 : _message$response6.file_links) || []).map(f => `<div style=\"margin:6px 0;\"><span>📄 </span><a href=\"${f.url}\" target=\"_blank\" style=\"color:#2563eb;text-decoration:none;\">${f.title}</a></div>`).join('');\n        const pages = (((_message$response7 = message.response) === null || _message$response7 === void 0 ? void 0 : _message$response7.related_content) || []).map(p => `<div style=\"margin:6px 0;\"><span>🔗 </span><a href=\"${p.url}\" target=\"_blank\" style=\"color:#2563eb;text-decoration:none;\">${p.title}</a></div>`).join('');\n        return `\n          <div style=\"padding:24px; font-family: Arial, Helvetica, sans-serif; color:#1f2937;\">\n            ${message.query ? `<h1 style=\"font-size:18px;margin:0 0 16px 0;color:#111827;\">${message.query}</h1>` : ''}\n            <div class=\"answer-block\">${htmlAnswer}</div>\n            ${relatedImages ? `<h2 style=\"font-size:16px;margin:18px 0 8px 0;color:#111827;\">Related Images</h2>${relatedImages}` : ''}\n            ${files ? `<h2 style=\"font-size:16px;margin:18px 0 8px 0;color:#111827;\">Files</h2>${files}` : ''}\n            ${pages ? `<h2 style=\"font-size:16px;margin:18px 0 8px 0;color:#111827;\">Related Pages</h2>${pages}` : ''}\n          </div>\n          <style>\n            .answer-block { margin-top: 8px; }\n            .answer-block table { width:100%; border-collapse: collapse; margin: 12px 0; }\n            .answer-block th, .answer-block td { border: 1px solid #e5e7eb; padding: 8px; text-align:left; }\n            .answer-block thead { background:#f3f4f6; }\n            .answer-block img { max-width: 100%; height:auto; }\n            .answer-block p { margin: 8px 0; }\n            .answer-block ul { margin: 8px 0 8px 16px; }\n            .answer-block ol { margin: 8px 0 8px 16px; }\n            .answer-block h1,.answer-block h2,.answer-block h3 { margin: 12px 0 6px 0; }\n            code { background:#f3f4f6; padding:2px 4px; border-radius:4px; }\n          </style>\n        `;\n      };\n      const createTempContainer = html => {\n        const el = document.createElement('div');\n        el.style.position = 'fixed';\n        el.style.left = '-10000px';\n        el.style.top = '0';\n        el.style.width = '800px';\n        el.innerHTML = html;\n        document.body.appendChild(el);\n        return el;\n      };\n      const inlineImages = async root => {\n        const imgs = Array.from(root.querySelectorAll('img'));\n        const fallback = 'https://hutechsolutions.com/wp-content/uploads/2024/08/hutech-logo-1.svg';\n        await Promise.all(imgs.map(async img => {\n          const src = img.getAttribute('src') || '';\n          try {\n            const res = await fetch(src, {\n              mode: 'cors'\n            });\n            if (!res.ok) throw new Error('fetch failed');\n            const blob = await res.blob();\n            const reader = new FileReader();\n            const dataUrl = await new Promise((resolve, reject) => {\n              reader.onloadend = () => resolve(reader.result);\n              reader.onerror = reject;\n              reader.readAsDataURL(blob);\n            });\n            img.src = dataUrl;\n          } catch {\n            img.src = fallback;\n          }\n        }));\n      };\n      const html = buildExportHtml();\n      const container = createTempContainer(html);\n      await inlineImages(container);\n      const canvas = await html2canvas(container, {\n        scale: 2,\n        useCORS: true\n      });\n      const imgData = canvas.toDataURL('image/png');\n      const pdf = new jsPDF('p', 'pt', 'a4');\n      const pdfWidth = pdf.internal.pageSize.getWidth();\n      const pdfHeight = pdf.internal.pageSize.getHeight();\n      const imgWidth = pdfWidth;\n      const imgHeight = canvas.height * imgWidth / canvas.width;\n      let heightLeft = imgHeight;\n      let position = 0;\n      pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);\n      heightLeft -= pdfHeight;\n      while (heightLeft > 0) {\n        position = heightLeft - imgHeight;\n        pdf.addPage();\n        pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);\n        heightLeft -= pdfHeight;\n      }\n      pdf.save('hutech-response.pdf');\n      document.body.removeChild(container);\n    } catch (error) {\n      console.error('PDF generation failed:', error);\n      alert('PDF export failed. Please try again.');\n    }\n  };\n  const generateMarkdown = () => {\n    try {\n      var _message$response8, _message$response9, _message$response0, _message$response1;\n      let markdown = '';\n      if (message.query) {\n        markdown += `# ${message.query}\\n\\n`;\n      }\n      const answerMd = message.text || '';\n      markdown += `${answerMd}\\n\\n`;\n\n      // Tables as GitHub-flavored Markdown\n      if ((_message$response8 = message.response) !== null && _message$response8 !== void 0 && _message$response8.tables && message.response.tables.length > 0) {\n        message.response.tables.forEach(tbl => {\n          markdown += `\\n### ${tbl.title}\\n\\n`;\n          if (tbl.headers && tbl.headers.length) {\n            markdown += `| ${tbl.headers.join(' | ')} |\\n`;\n            markdown += `| ${tbl.headers.map(() => '---').join(' | ')} |\\n`;\n          }\n          tbl.rows.forEach(row => {\n            markdown += `| ${row.join(' | ')} |\\n`;\n          });\n          markdown += `\\n`;\n        });\n      }\n\n      // Related images\n      if ((_message$response9 = message.response) !== null && _message$response9 !== void 0 && _message$response9.related_content) {\n        const imgs = message.response.related_content.filter(i => i.image);\n        if (imgs.length) {\n          markdown += `\\n## Related Images\\n\\n`;\n          imgs.forEach(i => {\n            markdown += `![${i.title}](${i.image})\\n\\n`;\n          });\n        }\n      }\n\n      // File links\n      if ((_message$response0 = message.response) !== null && _message$response0 !== void 0 && _message$response0.file_links && message.response.file_links.length > 0) {\n        markdown += '\\n## Files\\n\\n';\n        message.response.file_links.forEach(link => {\n          markdown += `- [${link.title}](${link.url})\\n`;\n        });\n      }\n\n      // Related pages\n      if ((_message$response1 = message.response) !== null && _message$response1 !== void 0 && _message$response1.related_content && message.response.related_content.length > 0) {\n        markdown += '\\n## Related Pages\\n\\n';\n        message.response.related_content.forEach(item => {\n          markdown += `- [${item.title}](${item.url})\\n`;\n        });\n      }\n      const blob = new Blob([markdown], {\n        type: 'text/markdown'\n      });\n      const url = URL.createObjectURL(blob);\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = 'hutech-response.md';\n      a.click();\n      URL.revokeObjectURL(url);\n    } catch (error) {\n      console.error('Markdown generation failed:', error);\n      alert('Markdown export failed. Please try again.');\n    }\n  };\n  const generateDOCX = async () => {\n    try {\n      var _message$text3, _message$response10, _message$response11, _message$response12, _message$response13;\n      const children = [];\n      if (message.query) {\n        children.push(new Paragraph({\n          text: message.query,\n          heading: HeadingLevel.HEADING_1\n        }));\n        children.push(new Paragraph({\n          text: ''\n        }));\n      }\n      const answerText = (((_message$text3 = message.text) === null || _message$text3 === void 0 ? void 0 : _message$text3.replace(/<[^>]*>/g, '')) || '').trim();\n      if (answerText) {\n        answerText.split('\\n').forEach(line => {\n          if (line.trim()) children.push(new Paragraph({\n            text: line\n          }));\n        });\n        children.push(new Paragraph({\n          text: ''\n        }));\n      }\n\n      // Tables\n      if ((_message$response10 = message.response) !== null && _message$response10 !== void 0 && _message$response10.tables && message.response.tables.length > 0) {\n        message.response.tables.forEach(tbl => {\n          children.push(new Paragraph({\n            text: tbl.title,\n            heading: HeadingLevel.HEADING_2\n          }));\n          const rows = [];\n          if (tbl.headers && tbl.headers.length) {\n            rows.push(new TableRow({\n              children: tbl.headers.map(h => new TableCell({\n                width: {\n                  size: 100 / tbl.headers.length,\n                  type: WidthType.PERCENTAGE\n                },\n                children: [new Paragraph({\n                  children: [new TextRun({\n                    text: h,\n                    bold: true\n                  })]\n                })]\n              }))\n            }));\n          }\n          tbl.rows.forEach(r => {\n            rows.push(new TableRow({\n              children: r.map(cell => {\n                var _tbl$headers;\n                return new TableCell({\n                  width: {\n                    size: 100 / (((_tbl$headers = tbl.headers) === null || _tbl$headers === void 0 ? void 0 : _tbl$headers.length) || r.length || 1),\n                    type: WidthType.PERCENTAGE\n                  },\n                  children: [new Paragraph({\n                    text: cell\n                  })]\n                });\n              })\n            }));\n          });\n          children.push(new DocxTable({\n            rows\n          }));\n        });\n      }\n\n      // Images (related content) - export as links for compatibility\n      if ((_message$response11 = message.response) !== null && _message$response11 !== void 0 && _message$response11.related_content) {\n        const imgs = message.response.related_content.filter(i => i.image);\n        if (imgs.length) {\n          children.push(new Paragraph({\n            text: 'Related Images',\n            heading: HeadingLevel.HEADING_2\n          }));\n          for (const i of imgs) {\n            children.push(new Paragraph({\n              text: i.title,\n              heading: HeadingLevel.HEADING_3\n            }));\n            if (i.image) {\n              children.push(new Paragraph({\n                children: [new ExternalHyperlink({\n                  children: [new TextRun({\n                    text: i.image,\n                    style: 'Hyperlink'\n                  })],\n                  link: i.image\n                })]\n              }));\n            }\n          }\n        }\n      }\n\n      // Files\n      if ((_message$response12 = message.response) !== null && _message$response12 !== void 0 && _message$response12.file_links && message.response.file_links.length > 0) {\n        children.push(new Paragraph({\n          text: 'Files',\n          heading: HeadingLevel.HEADING_2\n        }));\n        message.response.file_links.forEach(link => {\n          children.push(new Paragraph({\n            children: [new TextRun({\n              text: `${link.title}: `\n            }), new ExternalHyperlink({\n              children: [new TextRun({\n                text: link.url,\n                style: 'Hyperlink'\n              })],\n              link: link.url\n            })]\n          }));\n        });\n      }\n\n      // Related Pages\n      if ((_message$response13 = message.response) !== null && _message$response13 !== void 0 && _message$response13.related_content && message.response.related_content.length > 0) {\n        children.push(new Paragraph({\n          text: 'Related Pages',\n          heading: HeadingLevel.HEADING_2\n        }));\n        message.response.related_content.forEach(item => {\n          children.push(new Paragraph({\n            children: [new TextRun({\n              text: `${item.title}: `\n            }), new ExternalHyperlink({\n              children: [new TextRun({\n                text: item.url,\n                style: 'Hyperlink'\n              })],\n              link: item.url\n            })]\n          }));\n        });\n      }\n      const doc = new DocxDocument({\n        sections: [{\n          properties: {},\n          children\n        }]\n      });\n      const blob = await Packer.toBlob(doc);\n      const url = URL.createObjectURL(blob);\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = 'hutech-response.docx';\n      a.click();\n      URL.revokeObjectURL(url);\n    } catch (error) {\n      console.error('DOCX generation failed:', error);\n      alert('DOCX export failed. Please try again.');\n    }\n  };\n  const handleLike = () => {\n    setIsLiked(!isLiked);\n    if (isDisliked) setIsDisliked(false);\n  };\n  const handleDislike = () => {\n    setIsDisliked(!isDisliked);\n    if (isLiked) setIsLiked(false);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"message-actions flex items-center justify-between px-4 py-2\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center gap-2\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: openShareModal,\n        className: \"action-button flex items-center gap-1 px-3 py-1.5 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-md transition-colors text-sm\",\n        title: \"Share\",\n        children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n          xmlns: \"http://www.w3.org/2000/svg\",\n          fill: \"none\",\n          viewBox: \"0 0 24 24\",\n          strokeWidth: \"1.5\",\n          stroke: \"currentColor\",\n          className: \"w-4 h-4\",\n          children: /*#__PURE__*/_jsxDEV(\"path\", {\n            strokeLinecap: \"round\",\n            strokeLinejoin: \"round\",\n            d: \"M7.217 10.907a2.25 2.25 0 100 2.186m0-2.186c.18.324.283.696.283 1.093s-.103.77-.283 1.093m0-2.186l9.566-5.314m-9.566 7.5l9.566 5.314m0 0a2.25 2.25 0 103.935 2.186 2.25 2.25 0 00-3.935-2.186zm0-12.814a2.25 2.25 0 103.933-2.185 2.25 2.25 0 00-3.933 2.185z\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1209,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1208,\n          columnNumber: 11\n        }, this), \"Share\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1203,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"relative\",\n        ref: dropdownRef,\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setShowExportDropdown(!showExportDropdown),\n          className: \"action-button flex items-center gap-1 px-3 py-1.5 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-md transition-colors text-sm\",\n          title: \"Export content\",\n          children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n            xmlns: \"http://www.w3.org/2000/svg\",\n            fill: \"none\",\n            viewBox: \"0 0 24 24\",\n            strokeWidth: \"1.5\",\n            stroke: \"currentColor\",\n            className: \"w-4 h-4\",\n            children: /*#__PURE__*/_jsxDEV(\"path\", {\n              strokeLinecap: \"round\",\n              strokeLinejoin: \"round\",\n              d: \"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1222,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1221,\n            columnNumber: 13\n          }, this), \"Export\", /*#__PURE__*/_jsxDEV(\"svg\", {\n            xmlns: \"http://www.w3.org/2000/svg\",\n            fill: \"none\",\n            viewBox: \"0 0 24 24\",\n            strokeWidth: \"1.5\",\n            stroke: \"currentColor\",\n            className: \"w-3 h-3\",\n            children: /*#__PURE__*/_jsxDEV(\"path\", {\n              strokeLinecap: \"round\",\n              strokeLinejoin: \"round\",\n              d: \"M19.5 8.25l-7.5 7.5-7.5-7.5\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1226,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1225,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1216,\n          columnNumber: 11\n        }, this), showExportDropdown && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"export-dropdown absolute left-0 top-full mt-1 bg-white rounded-md shadow-lg z-10 min-w-32\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => {\n              try {\n                generatePDF();\n                setShowExportDropdown(false);\n              } catch (error) {\n                console.error('PDF export error:', error);\n                alert('PDF export failed. Please try again.');\n              }\n            },\n            className: \"block w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-100\",\n            title: \"Export as PDF\",\n            children: \"PDF\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1232,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => {\n              try {\n                generateMarkdown();\n                setShowExportDropdown(false);\n              } catch (error) {\n                console.error('Markdown export error:', error);\n                alert('Markdown export failed. Please try again.');\n              }\n            },\n            className: \"block w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-100\",\n            title: \"Export as Markdown\",\n            children: \"Markdown\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1247,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => {\n              try {\n                generateDOCX();\n                setShowExportDropdown(false);\n              } catch (error) {\n                console.error('DOCX export error:', error);\n                alert('DOCX export failed. Please try again.');\n              }\n            },\n            className: \"block w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-100\",\n            title: \"Export as DOCX\",\n            children: \"DOCX\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1262,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1231,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1215,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1201,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center gap-2\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleCopy,\n        className: \"action-button flex items-center gap-1 px-3 py-1.5 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-md transition-colors text-sm\",\n        title: \"Copy content\",\n        children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n          xmlns: \"http://www.w3.org/2000/svg\",\n          fill: \"none\",\n          viewBox: \"0 0 24 24\",\n          strokeWidth: \"1.5\",\n          stroke: \"currentColor\",\n          className: \"w-4 h-4\",\n          children: /*#__PURE__*/_jsxDEV(\"path\", {\n            strokeLinecap: \"round\",\n            strokeLinejoin: \"round\",\n            d: \"M15.666 3.888A2.25 2.25 0 0013.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 01-.75.75H9a.75.75 0 01-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 01-2.25 2.25H6.75A2.25 2.25 0 014.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 011.927-.184\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1291,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1290,\n          columnNumber: 11\n        }, this), \"Copy\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1285,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleLike,\n        className: `action-button flex items-center gap-1 px-3 py-1.5 rounded-md transition-colors text-sm ${isLiked ? 'text-blue-600 bg-blue-50' : 'text-gray-600 hover:text-gray-800 hover:bg-gray-100'}`,\n        title: \"Like\",\n        children: /*#__PURE__*/_jsxDEV(\"svg\", {\n          xmlns: \"http://www.w3.org/2000/svg\",\n          fill: isLiked ? \"currentColor\" : \"none\",\n          viewBox: \"0 0 24 24\",\n          strokeWidth: \"1.5\",\n          stroke: \"currentColor\",\n          className: \"w-4 h-4\",\n          children: /*#__PURE__*/_jsxDEV(\"path\", {\n            strokeLinecap: \"round\",\n            strokeLinejoin: \"round\",\n            d: \"M6.633 10.5c.806 0 1.533-.446 2.031-1.08a9.041 9.041 0 012.861-2.4c.723-.384 1.35-.956 1.653-1.715a4.498 4.498 0 00.322-1.672V3a.75.75 0 01.75-.75A2.25 2.25 0 0116.5 4.5c0 1.152-.26 2.243-.723 3.218-.266.558.107 1.282.725 1.282h3.126c1.026 0 1.945.694 2.054 1.715.045.422.068.85.068 1.285a11.95 11.95 0 01-2.649 7.521c-.388.482-.987.729-1.605.729H13.48c-.483 0-.964-.078-1.423-.23l-3.114-1.04a4.501 4.501 0 00-1.423-.23H5.904M14.25 9h2.25M5.904 18.75c.083.205.173.405.27.602.398.83 1.169 1.398 2.02 1.398h.716c.83 0 1.598-.481 1.998-1.25a.739.739 0 00.109-.376c0-.621-.504-1.125-1.125-1.125H9.375c-.621 0-1.125.504-1.125 1.125v.375M5.904 18.75L7.5 16.5H5.904z\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1304,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1303,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1297,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleDislike,\n        className: `action-button flex items-center gap-1 px-3 py-1.5 rounded-md transition-colors text-sm ${isDisliked ? 'text-red-600 bg-red-50' : 'text-gray-600 hover:text-gray-800 hover:bg-gray-100'}`,\n        title: \"Dislike\",\n        children: /*#__PURE__*/_jsxDEV(\"svg\", {\n          xmlns: \"http://www.w3.org/2000/svg\",\n          fill: isDisliked ? \"currentColor\" : \"none\",\n          viewBox: \"0 0 24 24\",\n          strokeWidth: \"1.5\",\n          stroke: \"currentColor\",\n          className: \"w-4 h-4 rotate-180\",\n          children: /*#__PURE__*/_jsxDEV(\"path\", {\n            strokeLinecap: \"round\",\n            strokeLinejoin: \"round\",\n            d: \"M6.633 10.5c.806 0 1.533-.446 2.031-1.08a9.041 9.041 0 012.861-2.4c.723-.384 1.35-.956 1.653-1.715a4.498 4.498 0 00.322-1.672V3a.75.75 0 01.75-.75A2.25 2.25 0 0116.5 4.5c0 1.152-.26 2.243-.723 3.218-.266.558.107 1.282.725 1.282h3.126c1.026 0 1.945.694 2.054 1.715.045.422.068.85.068 1.285a11.95 11.95 0 01-2.649 7.521c-.388.482-.987.729-1.605.729H13.48c-.483 0-.964-.078-1.423-.23l-3.114-1.04a4.501 4.501 0 00-1.423-.23H5.904M14.25 9h2.25M5.904 18.75c.083.205.173.405.27.602.398.83 1.169 1.398 2.02 1.398h.716c.83 0 1.598-.481 1.998-1.25a.739.739 0 00.109-.376c0-.621-.504-1.125-1.125-1.125H9.375c-.621 0-1.125.504-1.125 1.125v.375M5.904 18.75L7.5 16.5H5.904z\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1316,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1315,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1309,\n        columnNumber: 9\n      }, this), showShareModal && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"share-modal-overlay\",\n        role: \"dialog\",\n        \"aria-modal\": \"true\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"share-card\",\n          role: \"document\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"share-card-header\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"share-card-title\",\n              children: \"Share\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1324,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"share-close\",\n              onClick: closeShareModal,\n              \"aria-label\": \"Close\",\n              children: \"\\xD7\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1325,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1323,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"share-options\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"share-option\",\n              onClick: handleShareWhatsApp,\n              title: \"WhatsApp\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"share-icon whatsapp\",\n                children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                  xmlns: \"http://www.w3.org/2000/svg\",\n                  viewBox: \"0 0 24 24\",\n                  fill: \"currentColor\",\n                  width: \"24\",\n                  height: \"24\",\n                  children: /*#__PURE__*/_jsxDEV(\"path\", {\n                    d: \"M12 2a10 10 0 00-8.94 14.5L2 22l5.62-1.5A10 10 0 1012 2zm0 18a8 8 0 01-4.1-1.12l-.29-.17-3.33.89.89-3.33-.17-.29A8 8 0 1112 20zm3.71-5.29c-.2-.1-1.17-.58-1.35-.65-.18-.07-.31-.1-.44.1-.13.2-.5.65-.61.79-.11.14-.22.16-.42.06-.2-.1-.83-.31-1.58-.99-.58-.52-.97-1.16-1.09-1.36-.11-.2-.01-.31.08-.41.08-.08.2-.22.29-.33.09-.11.12-.19.18-.31.06-.12.03-.23-.01-.33-.04-.1-.44-1.06-.6-1.45-.16-.38-.32-.33-.44-.34-.11-.01-.23-.01-.35-.01-.12 0-.33.05-.5.23-.17.18-.66.65-.66 1.58 0 .93.68 1.83.78 1.96.1.13 1.33 2.04 3.23 2.86.45.19.8.31 1.07.4.45.14.86.12 1.19.07.36-.05 1.17-.48 1.33-.94.16-.46.16-.85.11-.94-.05-.09-.18-.14-.38-.24z\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1330,\n                    columnNumber: 124\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1330,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1329,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"share-label\",\n                children: \"WhatsApp\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1332,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1328,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"share-option\",\n              onClick: handleShareFacebook,\n              title: \"Facebook\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"share-icon facebook\",\n                children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                  xmlns: \"http://www.w3.org/2000/svg\",\n                  viewBox: \"0 0 24 24\",\n                  fill: \"currentColor\",\n                  width: \"24\",\n                  height: \"24\",\n                  children: /*#__PURE__*/_jsxDEV(\"path\", {\n                    d: \"M22 12a10 10 0 10-11.5 9.95v-7.04H7.9V12h2.6V9.8c0-2.57 1.53-3.99 3.87-3.99 1.12 0 2.29.2 2.29.2v2.52h-1.29c-1.27 0-1.66.79-1.66 1.6V12h2.83l-.45 2.91h-2.38v7.04A10 10 0 0022 12z\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1337,\n                    columnNumber: 124\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1337,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1336,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"share-label\",\n                children: \"Facebook\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1339,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1335,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"share-option\",\n              onClick: handleShareX,\n              title: \"X\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"share-icon x\",\n                children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                  xmlns: \"http://www.w3.org/2000/svg\",\n                  viewBox: \"0 0 24 24\",\n                  fill: \"currentColor\",\n                  width: \"24\",\n                  height: \"24\",\n                  children: /*#__PURE__*/_jsxDEV(\"path\", {\n                    d: \"M17.53 2H20l-5.5 6.3L21 22h-6.4l-3.9-6.1L5.9 22H3.4l6-6.9L3 2h6.5l3.5 5.6L17.5 2h.03zM8.2 3.7h-1l8.8 14h1L8.2 3.7z\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1344,\n                    columnNumber: 124\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1344,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1343,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"share-label\",\n                children: \"X\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1346,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1342,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"share-option\",\n              onClick: handleShareEmail,\n              title: \"Email\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"share-icon email\",\n                children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                  xmlns: \"http://www.w3.org/2000/svg\",\n                  viewBox: \"0 0 24 24\",\n                  fill: \"currentColor\",\n                  width: \"24\",\n                  height: \"24\",\n                  children: /*#__PURE__*/_jsxDEV(\"path\", {\n                    d: \"M20 4H4a2 2 0 00-2 2v12a2 2 0 002 2h16a2 2 0 002-2V6a2 2 0 00-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1351,\n                    columnNumber: 124\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1351,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1350,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"share-label\",\n                children: \"Email\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1353,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1349,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"share-option\",\n              onClick: handleCopyLink,\n              title: \"Copy link\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"share-icon copy\",\n                children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                  xmlns: \"http://www.w3.org/2000/svg\",\n                  viewBox: \"0 0 24 24\",\n                  fill: \"currentColor\",\n                  width: \"24\",\n                  height: \"24\",\n                  children: /*#__PURE__*/_jsxDEV(\"path\", {\n                    d: \"M16 1H4a2 2 0 00-2 2v12h2V3h12V1zm3 4H8a2 2 0 00-2 2v14a2 2 0 002 2h11a2 2 0 002-2V7a2 2 0 00-2-2zm0 16H8V7h11v14z\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 1358,\n                    columnNumber: 124\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1358,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1357,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"share-label\",\n                children: \"Copy\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1360,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1356,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1327,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"share-link-row\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"share-link-input\",\n              readOnly: true,\n              value: window.location.href\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1365,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"share-copy-button\",\n              onClick: handleCopyLink,\n              children: \"Copy\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1366,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1364,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1322,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1321,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1283,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 1199,\n    columnNumber: 5\n  }, this);\n};\n_s2(MessageActions, \"CXkOmZFz32E7oyv0gVaPMI3DDfU=\");\n_c3 = MessageActions;\nconst BotMessage = ({\n  message,\n  onSuggestionClick\n}) => {\n  _s3();\n  const response = message.response;\n  const answerRef = useRef(null);\n  useEffect(() => {\n    const root = answerRef.current;\n    if (!root) return;\n    const fallback = 'https://hutechsolutions.com/wp-content/uploads/2024/08/hutech-logo-1.svg';\n    const imgs = Array.from(root.querySelectorAll('img'));\n    imgs.forEach(img => {\n      const prev = img.onerror;\n      img.onerror = () => {\n        if (img.src !== fallback) img.src = fallback;\n        if (typeof prev === 'function') try {\n          prev(new Event('error'));\n        } catch {}\n      };\n    });\n  }, [message.text]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex items-start justify-center\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"max-w-3xl w-full\",\n      children: [(response === null || response === void 0 ? void 0 : response.related_content) && response.related_content.length > 0 && /*#__PURE__*/_jsxDEV(RelatedContentCarousel, {\n        items: response.related_content\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1403,\n        columnNumber: 11\n      }, this), message.text && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-4 rounded-xl prose text-gray-800\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          ref: answerRef,\n          dangerouslySetInnerHTML: {\n            __html: safeRenderMarkdown(renderIcons(renderTables(message.text, (response === null || response === void 0 ? void 0 : response.tables) || [])))\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1409,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1408,\n        columnNumber: 11\n      }, this), message.text && message.id !== 1 && /*#__PURE__*/_jsxDEV(MessageActions, {\n        message: message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1421,\n        columnNumber: 11\n      }, this), (response === null || response === void 0 ? void 0 : response.file_links) && response.file_links.length > 0 && /*#__PURE__*/_jsxDEV(FileLinksSection, {\n        files: response.file_links\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1426,\n        columnNumber: 11\n      }, this), (response === null || response === void 0 ? void 0 : response.recommendations) && response.recommendations.length > 0 && /*#__PURE__*/_jsxDEV(SuggestionsSection, {\n        suggestions: response.recommendations,\n        onSuggestionClick: onSuggestionClick\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1431,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1399,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 1398,\n    columnNumber: 5\n  }, this);\n};\n_s3(BotMessage, \"IiMVXVhUFmTyiDtOLnm8rtkEc9M=\");\n_c4 = BotMessage;\nconst LoadingMessage = () => {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex justify-start\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"rounded-xl rounded-bl-none p-4 shadow-md max-w-sm bg-white\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex space-x-2 animate-pulse\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-2 h-2 bg-gray-400 rounded-full\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1446,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-2 h-2 bg-gray-400 rounded-full\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1447,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-2 h-2 bg-gray-400 rounded-full\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1448,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1445,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1444,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 1443,\n    columnNumber: 5\n  }, this);\n};\n_c5 = LoadingMessage;\nconst RelatedContentCarousel = ({\n  items\n}) => {\n  _s4();\n  const [canScrollLeft, setCanScrollLeft] = useState(false);\n  const [canScrollRight, setCanScrollRight] = useState(true);\n  const containerRef = useRef(null);\n\n  // Function to get favicon URL for a website\n  const getFaviconUrl = websiteUrl => {\n    try {\n      const urlObj = new URL(websiteUrl);\n      const domain = urlObj.hostname;\n      // Use Google's favicon service for reliable favicon fetching\n      return `https://www.google.com/s2/favicons?domain=${domain}&sz=16`;\n    } catch {\n      return '';\n    }\n  };\n  const scrollLeft = () => {\n    if (containerRef.current) {\n      const scrollAmount = 200;\n      containerRef.current.scrollBy({\n        left: -scrollAmount,\n        behavior: 'smooth'\n      });\n    }\n  };\n  const scrollRight = () => {\n    if (containerRef.current) {\n      const scrollAmount = 200;\n      containerRef.current.scrollBy({\n        left: scrollAmount,\n        behavior: 'smooth'\n      });\n    }\n  };\n  const handleScroll = () => {\n    if (containerRef.current) {\n      const {\n        scrollLeft,\n        scrollWidth,\n        clientWidth\n      } = containerRef.current;\n      setCanScrollLeft(scrollLeft > 0);\n      setCanScrollRight(scrollLeft < scrollWidth - clientWidth - 1);\n    }\n  };\n  useEffect(() => {\n    const container = containerRef.current;\n    if (container) {\n      container.addEventListener('scroll', handleScroll);\n      handleScroll(); // Initial check\n      return () => container.removeEventListener('scroll', handleScroll);\n    }\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"w-full mb-6\",\n    children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n      className: \"font-semibold text-gray-800 mb-2 px-4\",\n      children: \"Related content\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1506,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"related-content-carousel-wrapper\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: scrollLeft,\n        disabled: !canScrollLeft,\n        className: `carousel-nav-button carousel-nav-left ${!canScrollLeft ? 'disabled' : ''}`,\n        children: /*#__PURE__*/_jsxDEV(\"svg\", {\n          xmlns: \"http://www.w3.org/2000/svg\",\n          fill: \"none\",\n          viewBox: \"0 0 24 24\",\n          strokeWidth: \"2\",\n          stroke: \"currentColor\",\n          className: \"w-5 h-5\",\n          children: /*#__PURE__*/_jsxDEV(\"path\", {\n            strokeLinecap: \"round\",\n            strokeLinejoin: \"round\",\n            d: \"M15.75 19.5L8.25 12l7.5-7.5\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1514,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1513,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1508,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: containerRef,\n        className: \"related-content-horizontal-container\",\n        children: items.map((item, index) => /*#__PURE__*/_jsxDEV(\"a\", {\n          href: item.url,\n          target: \"_blank\",\n          rel: \"noopener noreferrer\",\n          className: \"related-content-mini-card\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mini-card-favicon\",\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: getFaviconUrl(item.url),\n              alt: `${new URL(item.url).hostname} favicon`,\n              className: \"favicon-image\",\n              onError: e => {\n                // Replace with fallback icon if favicon fails\n                const target = e.target;\n                target.style.display = 'none';\n                const fallback = target.nextElementSibling;\n                if (fallback) fallback.style.display = 'flex';\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1531,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"favicon-fallback\",\n              style: {\n                display: 'none'\n              },\n              children: \"\\uD83D\\uDD17\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1543,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1530,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mini-card-content\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mini-card-hostname\",\n              children: new URL(item.url).hostname.replace('www.', '')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1548,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mini-card-title\",\n              children: item.title\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1551,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1547,\n            columnNumber: 15\n          }, this)]\n        }, index, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1523,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1518,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: scrollRight,\n        disabled: !canScrollRight,\n        className: `carousel-nav-button carousel-nav-right ${!canScrollRight ? 'disabled' : ''}`,\n        children: /*#__PURE__*/_jsxDEV(\"svg\", {\n          xmlns: \"http://www.w3.org/2000/svg\",\n          fill: \"none\",\n          viewBox: \"0 0 24 24\",\n          strokeWidth: \"2\",\n          stroke: \"currentColor\",\n          className: \"w-5 h-5\",\n          children: /*#__PURE__*/_jsxDEV(\"path\", {\n            strokeLinecap: \"round\",\n            strokeLinejoin: \"round\",\n            d: \"M8.25 4.5l7.5 7.5-7.5 7.5\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1563,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1562,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1557,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1507,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 1505,\n    columnNumber: 5\n  }, this);\n};\n_s4(RelatedContentCarousel, \"Sn92UkRwnRPIVyYcs8bCSMWMa/M=\");\n_c6 = RelatedContentCarousel;\nconst FileLinksSection = ({\n  files\n}) => {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"mt-6\",\n    children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n      className: \"font-semibold text-gray-800 mb-2 px-4\",\n      children: \"Files\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1574,\n      columnNumber: 7\n    }, this), files.map((file, index) => /*#__PURE__*/_jsxDEV(\"a\", {\n      href: file.url,\n      target: \"_blank\",\n      rel: \"noopener noreferrer\",\n      className: \"flex items-center gap-2 p-3 my-1 rounded-lg hover:bg-gray-100 transition-colors duration-200\",\n      children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n        xmlns: \"http://www.w3.org/2000/svg\",\n        className: \"h-5 w-5 text-gray-500\",\n        viewBox: \"0 0 20 20\",\n        fill: \"currentColor\",\n        children: /*#__PURE__*/_jsxDEV(\"path\", {\n          d: \"M4 4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V8a2 2 0 00-2-2h-5L9 4H4z\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1583,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1582,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"text-sm font-medium text-gray-700\",\n        children: file.title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1585,\n        columnNumber: 11\n      }, this)]\n    }, index, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1576,\n      columnNumber: 9\n    }, this))]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 1573,\n    columnNumber: 5\n  }, this);\n};\n_c7 = FileLinksSection;\nconst SuggestionsSection = ({\n  suggestions,\n  onSuggestionClick\n}) => {\n  _s5();\n  const [clickedSuggestions, setClickedSuggestions] = useState(new Set());\n  const handleSuggestionClick = suggestion => {\n    // Mark this suggestion as clicked\n    setClickedSuggestions(prev => new Set(prev.add(suggestion)));\n    // Call the original click handler\n    onSuggestionClick(suggestion);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"mt-6\",\n    children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n      className: \"font-semibold text-gray-800 mb-3 px-4\",\n      children: \"Suggested Questions\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1607,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"px-4\",\n      children: suggestions.map((suggestion, index) => /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => handleSuggestionClick(suggestion),\n        className: `suggestion-button flex items-center justify-between w-full text-left text-sm ${clickedSuggestions.has(suggestion) ? 'clicked' : 'text-gray-700'}`,\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: suggestion\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1615,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"svg\", {\n          xmlns: \"http://www.w3.org/2000/svg\",\n          fill: \"none\",\n          viewBox: \"0 0 24 24\",\n          strokeWidth: \"2\",\n          stroke: \"currentColor\",\n          className: \"w-4 h-4\",\n          children: /*#__PURE__*/_jsxDEV(\"path\", {\n            strokeLinecap: \"round\",\n            strokeLinejoin: \"round\",\n            d: \"M12 4.5v15m7.5-7.5h-15\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1617,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1616,\n          columnNumber: 13\n        }, this)]\n      }, index, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1610,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1608,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 1606,\n    columnNumber: 5\n  }, this);\n};\n\n// Utility functions\n_s5(SuggestionsSection, \"WGhy20VAKH7PLEvUZCc0f5Sx2TU=\");\n_c8 = SuggestionsSection;\nconst safeRenderMarkdown = content => {\n  try {\n    // Process the content through our preprocessing pipeline\n    const processed = preprocessResponse(content);\n\n    // Convert to HTML using marked\n    const html = marked(processed);\n\n    // Basic XSS protection - remove dangerous attributes and scripts\n    let safeHtml = html.replace(/<script\\b[^<]*(?:(?!<\\/script>)<[^<]*)*<\\/script>/gi, '').replace(/javascript:/gi, '').replace(/on\\w+=\"[^\"]*\"/gi, '').replace(/on\\w+='[^']*'/gi, '');\n\n    // Fix cases where a leading '#' remains inside heading tags\n    safeHtml = safeHtml.replace(/<(h[1-6])(\\b[^>]*)>#{1,6}\\s+/gi, '<$1$2>');\n    // Remove any empty headings that may have been introduced\n    safeHtml = safeHtml.replace(/<h[1-6][^>]*>\\s*<\\/h[1-6]>/gi, '');\n    return safeHtml;\n  } catch (error) {\n    console.error('Error rendering markdown:', error);\n    return content; // Fallback to plain text\n  }\n};\nconst renderTables = (answer, tables) => {\n  if (!tables || tables.length === 0) {\n    return answer;\n  }\n  let processedAnswer = answer;\n  tables.forEach(table => {\n    const placeholder = `[TABLE:${table.title}]`;\n    if (processedAnswer.includes(placeholder)) {\n      let tableHtml = `<div class=\"overflow-x-auto my-4\">`;\n      tableHtml += `<table class=\"min-w-full border border-gray-300 rounded-lg overflow-hidden shadow-sm\">`;\n      tableHtml += `<caption class=\"p-2 text-sm text-gray-500 font-medium text-left\">${table.title}</caption>`;\n      if (table.headers && table.headers.length > 0) {\n        tableHtml += `<thead class=\"bg-gray-100\">`;\n        tableHtml += `<tr>${table.headers.map(h => `<th class=\"p-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider\">${h}</th>`).join('')}</tr>`;\n        tableHtml += `</thead>`;\n      }\n      tableHtml += `<tbody class=\"divide-y divide-gray-200\">`;\n      table.rows.forEach(row => {\n        tableHtml += `<tr class=\"bg-white\">`;\n        tableHtml += row.map(cell => `<td class=\"p-3 text-sm text-gray-800\">${cell}</td>`).join('');\n        tableHtml += `</tr>`;\n      });\n      tableHtml += `</tbody>`;\n      tableHtml += `</table></div>`;\n      processedAnswer = processedAnswer.replace(placeholder, tableHtml);\n    }\n  });\n  return processedAnswer;\n};\nconst getIconSVG = iconName => {\n  const icons = {\n    location: `<svg xmlns=\"http://www.w3.org/2000/svg\" class=\"inline-block w-5 h-5\" viewBox=\"0 0 24 24\"><path fill=\"currentColor\" d=\"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5S10.62 6.5 12 6.5s2.5 1.12 2.5 2.5S13.38 11.5 12 11.5z\"/></svg>`,\n    phone: `<svg xmlns=\"http://www.w3.org/2000/svg\" class=\"inline-block w-5 h-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M2 6.5c1.5-2 4-3 6.5-2l2 2a1 1 0 010 1.4L9 10a12 12 0 005 5l2.1-1.5a1 1 0 011.4 0l2 2c1 2.5 0 5-2 6.5-.6.4-1.4.5-2.1.2C10.2 20.5 3.5 13.8 1.8 6.6c-.3-.7-.2-1.5.2-2.1z\"/></svg>`,\n    mobile: `<svg xmlns=\"http://www.w3.org/2000/svg\" class=\"inline-block w-5 h-5\" viewBox=\"0 0 24 24\"><path fill=\"currentColor\" d=\"M15.5 1h-7a.5.5 0 00-.5.5v21a.5.5 0 00.5.5h7a.5.5 0 00.5-.5V1.5a.5.5 0 00-.5-.5zM12 22a1 1 0 110-2 1 1 0 010 2z\"/></svg>`,\n    email: `<svg xmlns=\"http://www.w3.org/2000/svg\" class=\"inline-block w-5 h-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M3 5h18a2 2 0 012 2v10a2 2 0 01-2 2H3a2 2 0 01-2-2V7a2 2 0 012-2z\" /><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M3 7l9 6 9-6\" /></svg>`\n  };\n  return icons[iconName] || '';\n};\nconst renderIcons = text => {\n  return text.replace(/\\[ICON:(.*?)]/g, (match, iconName) => {\n    return `<span class=\"inline-block align-middle\">${getIconSVG(iconName.trim())}</span>`;\n  });\n};\nconst preprocessResponse = text => {\n  let processedText = text.replace(/&nbsp;|\\u00A0|\\t/g, ' ');\n  processedText = processedText.replace(/([^\\n])---/g, '$1\\n\\n---\\n\\n');\n  processedText = processedText.replace(/^(\\s*)\\*\\s+/gm, '$1* ');\n  processedText = processedText.replace(/^(#+)(?! )/gm, '$1 ');\n  processedText = processedText.replace(/^(\\s*>)(?! )/gm, '$1 ');\n  return processedText.trim();\n};\nexport default App;\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8;\n$RefreshReg$(_c, \"App\");\n$RefreshReg$(_c2, \"UserMessage\");\n$RefreshReg$(_c3, \"MessageActions\");\n$RefreshReg$(_c4, \"BotMessage\");\n$RefreshReg$(_c5, \"LoadingMessage\");\n$RefreshReg$(_c6, \"RelatedContentCarousel\");\n$RefreshReg$(_c7, \"FileLinksSection\");\n$RefreshReg$(_c8, \"SuggestionsSection\");","map":{"version":3,"names":["React","useState","useEffect","useRef","marked","Navigation","jsPDF","html2canvas","Document","DocxDocument","Packer","Paragraph","HeadingLevel","TextRun","ExternalHyperlink","Table","DocxTable","TableRow","TableCell","WidthType","User","Building","Settings","Briefcase","BarChart","Trophy","Laptop","Phone","jsxDEV","_jsxDEV","setOptions","async","breaks","gfm","App","_s","messages","setMessages","id","text","isUser","timestamp","Date","inputValue","setInputValue","isLoading","setIsLoading","currentPage","setCurrentPage","showMenu","setShowMenu","menuRef","scrollToBottom","window","scrollTo","top","document","body","scrollHeight","behavior","setTimeout","handleClickOutside","event","current","contains","target","addEventListener","removeEventListener","questionCards","icon","size","fileName","_jsxFileName","lineNumber","columnNumber","title","description","category","validateBotResponse","response","answer","related_content","Array","isArray","filter","item","url","undefined","recommendations","file_links","tables","table","headers","rows","parseJsonResponse","jsonData","rawResponse","relatedContent","suggestions","fileLinks","files","message","data","length","JSON","stringify","parseTextResponse","textData","trimmedText","trim","startsWith","endsWith","parsed","parse","e","console","warn","processedText","preprocessTextResponse","processed","replace","lines","split","normalized","map","line","trimmed","test","bulletMatch","match","indent","content","numMatch","num","join","lines2","out","lastHeadingText","ln","m","toLowerCase","push","sendMessage","query","messageText","userMessage","now","prev","apiEndpoint","process","env","REACT_APP_API_ENDPOINT","fetch","method","ok","errorText","Error","status","botResponse","contentType","get","includes","json","parseError","fallbackText","catch","botMessage","error","debugInfo","TypeError","SyntaxError","toISOString","errorMessage","handleSuggestionClick","suggestion","handleCardClick","card","handleFormSubmit","preventDefault","clearChat","newChat","handleNavigation","page","className","children","onNavigate","onSubmit","type","placeholder","value","onChange","disabled","onClick","log","xmlns","fill","viewBox","strokeWidth","stroke","strokeLinecap","strokeLinejoin","d","index","UserMessage","BotMessage","onSuggestionClick","LoadingMessage","ref","_c","dangerouslySetInnerHTML","__html","_c2","MessageActions","_s2","showExportDropdown","setShowExportDropdown","showShareModal","setShowShareModal","isLiked","setIsLiked","isDisliked","setIsDisliked","dropdownRef","copyToClipboard","Promise","resolve","reject","navigator","clipboard","isSecureContext","writeText","then","fallbackCopyTextToClipboard","textArea","createElement","style","position","left","width","height","padding","border","outline","boxShadow","background","setAttribute","userSelect","appendChild","select","focus","setSelectionRange","successful","execCommand","removeChild","selection","getSelection","range","createRange","selectNodeContents","removeAllRanges","addRange","copySuccess","selectionError","err","handleCopy","_message$text","_message$response","_message$response2","_message$response3","textToCopy","answerText","itemsWithImages","image","forEach","link","alert","copyText","buildShareText","_message$text2","openShareModal","closeShareModal","handleShareWhatsApp","shareText","encodeURIComponent","open","handleShareFacebook","shareUrl","location","href","quote","handleShareX","intent","handleShareEmail","subject","mailto","handleCopyLink","generatePDF","buildExportHtml","_message$response4","_message$response5","_message$response6","_message$response7","htmlAnswer","safeRenderMarkdown","renderIcons","renderTables","relatedImages","i","f","pages","p","createTempContainer","html","el","innerHTML","inlineImages","root","imgs","from","querySelectorAll","fallback","all","img","src","getAttribute","res","mode","blob","reader","FileReader","dataUrl","onloadend","result","onerror","readAsDataURL","container","canvas","scale","useCORS","imgData","toDataURL","pdf","pdfWidth","internal","pageSize","getWidth","pdfHeight","getHeight","imgWidth","imgHeight","heightLeft","addImage","addPage","save","generateMarkdown","_message$response8","_message$response9","_message$response0","_message$response1","markdown","answerMd","tbl","row","Blob","URL","createObjectURL","a","download","click","revokeObjectURL","generateDOCX","_message$text3","_message$response10","_message$response11","_message$response12","_message$response13","heading","HEADING_1","HEADING_2","h","PERCENTAGE","bold","r","cell","_tbl$headers","HEADING_3","doc","sections","properties","toBlob","handleLike","handleDislike","role","readOnly","_c3","_s3","answerRef","Event","RelatedContentCarousel","items","FileLinksSection","SuggestionsSection","_c4","_c5","_s4","canScrollLeft","setCanScrollLeft","canScrollRight","setCanScrollRight","containerRef","getFaviconUrl","websiteUrl","urlObj","domain","hostname","scrollLeft","scrollAmount","scrollBy","scrollRight","handleScroll","scrollWidth","clientWidth","rel","alt","onError","display","nextElementSibling","_c6","file","_c7","_s5","clickedSuggestions","setClickedSuggestions","Set","add","has","_c8","preprocessResponse","safeHtml","processedAnswer","tableHtml","getIconSVG","iconName","icons","phone","mobile","email","$RefreshReg$"],"sources":["C:/Users/Hutech Solutions/Downloads/28-7.40am-update (5)/src/App.tsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { marked } from 'marked';\nimport './App.css';\nimport Navigation from './components/Navigation';\nimport { jsPDF } from 'jspdf';\nimport html2canvas from 'html2canvas';\nimport { Document as DocxDocument, Packer, Paragraph, HeadingLevel, TextRun, ExternalHyperlink, Table as DocxTable, TableRow, TableCell, WidthType } from 'docx';\nimport { User, Building, Settings, Briefcase, BarChart, Trophy, Laptop, Phone } from \"lucide-react\";\n\n// Configure marked for better rendering and security\nmarked.setOptions({\n  async: false,\n  breaks: true, // Convert line breaks to <br>\n  gfm: true // GitHub Flavored Markdown\n});\n\ninterface Message {\n  id: number;\n  text: string;\n  isUser: boolean;\n  timestamp: Date;\n  response?: BotResponse;\n  query?: string; // Store the original user question for bot messages\n}\n\ninterface BotResponse {\n  answer: string;\n  related_content?: RelatedContent[];\n  recommendations?: string[];\n  file_links?: FileLink[];\n  tables?: Table[];\n}\n\ninterface RelatedContent {\n  image?: string;\n  title: string;\n  url: string;\n}\n\ninterface FileLink {\n  title: string;\n  url: string;\n}\n\ninterface Table {\n  title: string;\n  headers: string[];\n  rows: string[][];\n}\n\ninterface QuestionCard {\n  icon: React.ReactNode;\n  title: string;\n  description: string;\n  category: string;\n}\n\nfunction App() {\n  const [messages, setMessages] = useState<Message[]>([\n    {\n      id: 1,\n      text: \"Hello! I am your AI assistant. How can I help you today?\",\n      isUser: false,\n      timestamp: new Date()\n    }\n  ]);\n  const [inputValue, setInputValue] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const [currentPage, setCurrentPage] = useState<'client' | 'chat'>('client');\n  const [showMenu, setShowMenu] = useState(false);\n  const menuRef = useRef<HTMLDivElement>(null);\n\n  // Auto-scroll to bottom when new messages are added\n  useEffect(() => {\n    if (currentPage === 'chat') {\n      const scrollToBottom = () => {\n        window.scrollTo({\n          top: document.body.scrollHeight,\n          behavior: 'smooth'\n        });\n      };\n      // Small delay to ensure DOM is updated\n      setTimeout(scrollToBottom, 100);\n    }\n  }, [messages, currentPage]);\n\n  // Close menu when clicking outside\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      if (menuRef.current && !menuRef.current.contains(event.target as Node)) {\n        setShowMenu(false);\n      }\n    };\n\n    if (showMenu) {\n      document.addEventListener('mousedown', handleClickOutside);\n    }\n\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, [showMenu]);\n\n  const questionCards: QuestionCard[] = [\n    {\n      icon: <User size={20} />,\n      title: 'CEO',\n      description: 'who is the CEO?',\n      category: 'About'\n    },\n    {\n      icon: <Building size={20} />,\n      title: 'Offices',\n      description: 'Where are our offices?',\n      category: 'Location'\n    },\n    {\n      icon: <Settings size={20} />,\n      title: 'Services',\n      description: 'What services do we provide?',\n      category: 'Services'\n    },\n    {\n      icon: <Briefcase size={20} />,\n      title: 'Industries',\n      description: 'What industries do we serve?',\n      category: 'Industries'\n    },\n    {\n      icon: <BarChart size={20} />,\n      title: 'Stats',\n      description: 'What are some impressive stats about Hutech?',\n      category: 'Statistics'\n    },\n    {\n      icon: <Trophy size={20} />,\n      title: 'Certifications',\n      description: 'What certifications do we have?',\n      category: 'Qualifications'\n    },\n    {\n      icon: <Laptop size={20} />,\n      title: 'Tech Stack',\n      description: 'What is our tech stack?',\n      category: 'Technology'\n    },\n    {\n      icon: <Phone size={20} />,\n      title: 'Contact',\n      description: 'Give me your contact details.',\n      category: 'Contact'\n    }\n  ];\n  // Helper function to validate and sanitize BotResponse data\n  const validateBotResponse = (response: Partial<BotResponse>): BotResponse => {\n    return {\n      answer: typeof response.answer === 'string' ? response.answer : '',\n      related_content: Array.isArray(response.related_content)\n        ? response.related_content.filter(item =>\n          item && typeof item.title === 'string' && typeof item.url === 'string'\n        )\n        : undefined,\n      recommendations: Array.isArray(response.recommendations)\n        ? response.recommendations.filter(item => typeof item === 'string')\n        : undefined,\n      file_links: Array.isArray(response.file_links)\n        ? response.file_links.filter(item =>\n          item && typeof item.title === 'string' && typeof item.url === 'string'\n        )\n        : undefined,\n      tables: Array.isArray(response.tables)\n        ? response.tables.filter(table =>\n          table &&\n          typeof table.title === 'string' &&\n          Array.isArray(table.headers) &&\n          Array.isArray(table.rows)\n        )\n        : undefined\n    };\n  };\n\n  // Helper function to parse JSON responses with multiple format support\n  const parseJsonResponse = (jsonData: any): BotResponse => {\n    // Handle different JSON response formats\n\n    // Format 1: { response: { answer: \"...\", ... } }\n    if (jsonData.response && typeof jsonData.response === 'object') {\n      const rawResponse = {\n        answer: jsonData.response.answer || jsonData.response.text || '',\n        related_content: jsonData.response.related_content || jsonData.response.relatedContent,\n        recommendations: jsonData.response.recommendations || jsonData.response.suggestions,\n        file_links: jsonData.response.file_links || jsonData.response.fileLinks || jsonData.response.files,\n        tables: jsonData.response.tables\n      };\n      return validateBotResponse(rawResponse);\n    }\n\n    // Format 2: { answer: \"...\", ... } (direct format)\n    if (jsonData.answer || jsonData.text || jsonData.message) {\n      const rawResponse = {\n        answer: jsonData.answer || jsonData.text || jsonData.message,\n        related_content: jsonData.related_content || jsonData.relatedContent,\n        recommendations: jsonData.recommendations || jsonData.suggestions,\n        file_links: jsonData.file_links || jsonData.fileLinks || jsonData.files,\n        tables: jsonData.tables\n      };\n      return validateBotResponse(rawResponse);\n    }\n\n    // Format 3: { data: { ... } }\n    if (jsonData.data && typeof jsonData.data === 'object') {\n      return parseJsonResponse(jsonData.data);\n    }\n\n    // Format 4: Array format [{ answer: \"...\" }]\n    if (Array.isArray(jsonData) && jsonData.length > 0) {\n      return parseJsonResponse(jsonData[0]);\n    }\n\n    // Format 5: String response wrapped in object\n    if (typeof jsonData === 'string') {\n      return validateBotResponse({ answer: jsonData });\n    }\n\n    // Fallback: stringify the entire object\n    return validateBotResponse({\n      answer: JSON.stringify(jsonData, null, 2)\n    });\n  };\n\n  // Helper function to parse text responses and detect if they contain JSON\n  const parseTextResponse = (textData: string): BotResponse => {\n    const trimmedText = textData.trim();\n\n    // Check if the text might be JSON\n    if ((trimmedText.startsWith('{') && trimmedText.endsWith('}')) ||\n      (trimmedText.startsWith('[') && trimmedText.endsWith(']'))) {\n      try {\n        const parsed = JSON.parse(trimmedText);\n        return parseJsonResponse(parsed);\n      } catch (e) {\n        // If JSON parsing fails, treat as markdown/text\n        console.warn('Text looks like JSON but failed to parse:', e);\n      }\n    }\n\n    // Check for common structured text patterns and convert to proper format\n    const processedText = preprocessTextResponse(trimmedText);\n\n    return validateBotResponse({\n      answer: processedText\n    });\n  };\n\n  // Helper function to preprocess text responses for better rendering\n  const preprocessTextResponse = (text: string): string => {\n\n    // Handle common formatting patterns\n    let processed = text;\n\n    // Convert **bold** to proper markdown\n    processed = processed.replace(/\\*\\*(.*?)\\*\\*/g, '**$1**');\n\n    // Convert __bold__ to proper markdown\n    processed = processed.replace(/__(.*?)__/g, '**$1**');\n\n    // Convert *italic* to proper markdown\n    processed = processed.replace(/\\*(.*?)\\*/g, '*$1*');\n\n    // Fix line breaks and spacing\n    processed = processed.replace(/\\\\n/g, '\\n');\n    processed = processed.replace(/\\n\\s*\\n\\s*\\n/g, '\\n\\n');\n    // Convert common bullet symbols to '-' at line start\n    processed = processed.replace(/^\\s*[•–]\\s+/gm, '- ');\n    // Ensure a blank line before any list (handles indented bullets and numbers)\n    processed = processed.replace(/([^\\n])\\n(\\s*[-*+]\\s)/g, '$1\\n\\n$2');\n    processed = processed.replace(/([^\\n])\\n(\\s*\\d+\\.\\s)/g, '$1\\n\\n$2');\n\n    // Line-wise normalization to preserve horizontal rules (---) while fixing bullets\n    const lines = processed.split(/\\n/);\n    const normalized = lines.map((line) => {\n      const trimmed = line.trim();\n      // Detect HR: three or more -, _, or * with only spaces between\n      if (/^[-_*](\\s*[-_*]){2,}$/.test(trimmed)) {\n        return '---';\n      }\n      // Bullet like '-' or '*' or '+' with missing/extra spaces (but not HR)\n      const bulletMatch = line.match(/^(\\s*)[-*+]\\s*(.+)$/);\n      if (bulletMatch) {\n        const indent = bulletMatch[1];\n        const content = bulletMatch[2];\n        return `${indent}- ${content}`;\n      }\n      // Numbered list normalization\n      const numMatch = line.match(/^(\\s*)(\\d+)\\.\\s*(.+)$/);\n      if (numMatch) {\n        const indent = numMatch[1];\n        const num = numMatch[2];\n        const content = numMatch[3];\n        return `${indent}${num}. ${content}`;\n      }\n      return line;\n    }).join('\\n');\n\n    processed = normalized;\n\n    // Handle headers that might not have proper spacing\n    processed = processed.replace(/^(#+)(\\S)/gm, '$1 $2');\n\n    // De-duplicate consecutive identical headings (e.g., repeated H1/H2 lines)\n    const lines2 = processed.split('\\n');\n    const out: string[] = [];\n    let lastHeadingText = '';\n    for (const ln of lines2) {\n      const m = ln.match(/^(#+)\\s+(.*)$/);\n      if (m) {\n        const current = m[2].trim();\n        if (current.toLowerCase() === lastHeadingText.toLowerCase()) {\n          continue;\n        }\n        lastHeadingText = current;\n        out.push(ln);\n      } else {\n        lastHeadingText = '';\n        out.push(ln);\n      }\n    }\n    processed = out.join('\\n');\n\n    return processed.trim();\n  };\n\n  const sendMessage = async (query?: string) => {\n    const messageText = query || inputValue.trim();\n    if (!messageText) return;\n\n    // Switch to chat page immediately\n    setCurrentPage('chat');\n\n    const userMessage: Message = {\n      id: Date.now(),\n      text: messageText,\n      isUser: true,\n      timestamp: new Date()\n    };\n\n    setMessages(prev => [...prev, userMessage]);\n    setInputValue('');\n    setIsLoading(true);\n\n    try {\n      // Use environment variable for API endpoint, fallback to localhost\n      const apiEndpoint = process.env.REACT_APP_API_ENDPOINT || 'http://localhost:3001/query';\n\n      const response = await fetch(apiEndpoint, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({ query: messageText }),\n      });\n\n      if (!response.ok) {\n        const errorText = await response.text();\n        throw new Error(`HTTP error! status: ${response.status}. Response: ${errorText}`);\n      }\n\n      // Try to parse as JSON first, fallback to text\n      let botResponse: BotResponse;\n      const contentType = response.headers.get('content-type');\n\n      try {\n        if (contentType && contentType.includes('application/json')) {\n          const jsonData = await response.json();\n          botResponse = parseJsonResponse(jsonData);\n        } else {\n          const textData = await response.text();\n          botResponse = parseTextResponse(textData);\n        }\n      } catch (parseError) {\n        console.warn('Failed to parse response, using fallback:', parseError);\n        const fallbackText = await response.text().catch(() => 'Failed to get response');\n        botResponse = { answer: fallbackText };\n      }\n\n      const botMessage: Message = {\n        id: Date.now() + 1,\n        text: botResponse.answer || \"Sorry, I couldn't process your request.\",\n        isUser: false,\n        timestamp: new Date(),\n        response: botResponse,\n        query: messageText // Store the user's question\n      };\n\n      setMessages(prev => [...prev, botMessage]);\n    } catch (error) {\n      console.error('Error sending message:', error);\n\n      // Provide helpful error message based on error type\n      let errorText = \"Sorry, I encountered an error while processing your request.\";\n      let debugInfo = '';\n\n      if (error instanceof TypeError && error.message === 'Failed to fetch') {\n        errorText = \"Unable to connect to the backend server. Please check if the API server is running and accessible.\";\n        debugInfo = 'Network connection failed';\n      } else if (error instanceof SyntaxError) {\n        errorText = \"Received an invalid response format from the server.\";\n        debugInfo = 'JSON parsing error';\n      } else if (error instanceof Error) {\n        errorText = `Server error: ${error.message}`;\n        debugInfo = error.message;\n      }\n\n      // Log detailed error information for debugging\n      console.warn('Chat error details:', {\n        error: error,\n        message: messageText,\n        timestamp: new Date().toISOString(),\n        debugInfo: debugInfo\n      });\n\n      const errorMessage: Message = {\n        id: Date.now() + 1,\n        text: errorText,\n        isUser: false,\n        timestamp: new Date(),\n        query: messageText\n      };\n      setMessages(prev => [...prev, errorMessage]);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleSuggestionClick = (suggestion: string) => {\n    setInputValue(suggestion);\n    setTimeout(() => {\n      sendMessage(suggestion);\n    }, 100);\n  };\n\n  const handleCardClick = (card: QuestionCard) => {\n    sendMessage(card.description);\n  };\n\n  const handleFormSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    sendMessage();\n  };\n\n  const clearChat = () => {\n    setMessages([\n      {\n        id: 1,\n        text: \"Hello! I am your AI assistant. How can I help you today?\",\n        isUser: false,\n        timestamp: new Date()\n      }\n    ]);\n    setInputValue('');\n    setCurrentPage('client');\n    setShowMenu(false);\n  };\n\n  const newChat = () => {\n    setCurrentPage('client');\n    setInputValue('');\n    setShowMenu(false);\n  };\n\n  const handleNavigation = (page: 'client' | 'chat') => {\n    setCurrentPage(page);\n    setShowMenu(false);\n  };\n\n  if (currentPage === 'client') {\n    return (\n      <div className=\"client-page\">\n        <Navigation currentPage={currentPage} onNavigate={handleNavigation} />\n\n        {/* Main Content */}\n        <main className=\"client-main\">\n          <div className=\"welcome-section\">\n            <h1 className=\"welcome-title\">\n              Your AI Partner, <span className=\"husqy-text\">Husqy</span>\n            </h1>\n            <p className=\"welcome-subtitle\">\n              I'm here to help you explore Hutech Solutions' cutting-edge technology and IT services. Whether you're curious about our cutting-edge technology or need details on our IT services, feel free to ask.\n            </p>\n          </div>\n\n          {/* Search Bar */}\n          <div className=\"client-search-container\">\n            <form onSubmit={handleFormSubmit} className=\"client-search-form\">\n              <div className=\"search-input-wrapper\">\n                <input\n                  type=\"text\"\n                  placeholder=\" Ask me anything...\"\n                  value={inputValue}\n                  onChange={(e) => setInputValue(e.target.value)}\n                  disabled={isLoading}\n                  className={`client-search-input${isLoading ? ' searching' : ''}`}\n                />\n                <button\n                  type={inputValue.trim() ? 'submit' : 'button'}\n                  onClick={!inputValue.trim() && !isLoading ? () => console.log('Voice input placeholder clicked') : undefined}\n                  className={`search-send-button${isLoading ? ' searching' : ''}`}\n                  disabled={isLoading}\n                >\n                  {isLoading ? (\n                    <div className=\"searching-animation\" aria-label=\"Loading\">\n                      <span className=\"dot\"></span>\n                      <span className=\"dot\"></span>\n                      <span className=\"dot\"></span>\n                    </div>\n                  ) : inputValue.trim() ? (\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" strokeWidth=\"2\" stroke=\"currentColor\" className=\"w-5 h-5\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5\" />\n                    </svg>\n                  ) : (\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"currentColor\" className=\"w-5 h-5\">\n                      <path d=\"M12 14a3 3 0 003-3V7a3 3 0 10-6 0v4a3 3 0 003 3z\" />\n                      <path d=\"M19 11a1 1 0 10-2 0 5 5 0 11-10 0 1 1 0 10-2 0 7 7 0 006 6.92V21a1 1 0 102 0v-3.08A7 7 0 0019 11z\" />\n                    </svg>\n                  )}\n                </button>\n              </div>\n            </form>\n          </div>\n\n          {/* Question Cards - Horizontal Scroll */}\n          <div className=\"question-cards-container\">\n            <div className=\"question-cards-scroll\">\n              {questionCards.map((card, index) => (\n                <div\n                  key={index}\n                  className=\"question-card-horizontal\"\n                  onClick={() => handleCardClick(card)}\n                >\n                  <div className=\"card-icon\">{card.icon}</div>\n                  <div className=\"card-content\">\n                    <h3 className=\"card-title\">{card.title}</h3>\n                    <p className=\"card-description\">{card.description}</p>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n        </main>\n      </div>\n    );\n  }\n\n  // Chat Page\n  return (\n    <div className=\"bg-white body\" id='body'>\n      <Navigation currentPage={currentPage} onNavigate={handleNavigation} />\n      {/* Chat History Panel */}\n      <div id=\"chat-history\" className=\"chat-history-container\">\n        {messages.map((message) => (\n          <div key={message.id}>\n            {message.isUser ? (\n              <UserMessage text={message.text} />\n            ) : (\n              <BotMessage message={message} onSuggestionClick={handleSuggestionClick} />\n            )}\n          </div>\n        ))}\n\n        {isLoading && <LoadingMessage />}\n      </div>\n\n      {/* Chat Input Form with Menu */}\n      <div className=\"sticky bottom-0 bg-white py-4 chat-input-sticky\">\n        <div className=\"chat-search-container\">\n          <form id=\"chat-form\" className=\"chat-search-form\" onSubmit={handleFormSubmit}>\n            <div className=\"chat-input-wrapper\" ref={menuRef}>\n              <input\n                id=\"user-input\"\n                type=\"text\"\n                placeholder=\" Ask me anything...\"\n                value={inputValue}\n                onChange={(e) => setInputValue(e.target.value)}\n                disabled={isLoading}\n                className={`chat-search-input${isLoading ? ' searching' : ''}`}\n              />\n\n              {/* Three Dots Menu Inside Input */}\n              {/* <button\n                type=\"button\"\n                className=\"chat-menu-button-inside\"\n                onClick={clearChat} // directly clears chat on click\n              >\n                <svg\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                  fill=\"none\"\n                  viewBox=\"0 0 24 24\"\n                  stroke=\"red\"   // make stroke red\n                  width=\"20\"\n                  height=\"20\"\n                >\n                  <path\n                    strokeLinecap=\"round\"\n                    strokeLinejoin=\"round\"\n                    strokeWidth=\"2\"\n                    d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\"\n                  />\n                </svg>\n              </button> */}\n\n              <button\n                type={inputValue.trim() ? 'submit' : 'button'}\n                onClick={!inputValue.trim() && !isLoading ? () => console.log('Voice input placeholder clicked') : undefined}\n                className={`chat-send-button${isLoading ? ' searching' : ''}`}\n                disabled={isLoading}\n              >\n                {isLoading ? (\n                  <div className=\"searching-animation\" aria-label=\"Loading\">\n                    <span className=\"dot\"></span>\n                    <span className=\"dot\"></span>\n                    <span className=\"dot\"></span>\n                  </div>\n                ) : inputValue.trim() ? (\n                  <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" strokeWidth=\"2\" stroke=\"currentColor\" className=\"w-5 h-5\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5\" />\n                  </svg>\n                ) : (\n                  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"currentColor\" className=\"w-5 h-5\">\n                    <path d=\"M12 14a3 3 0 003-3V7a3 3 0 10-6 0v4a3 3 0 003 3z\" />\n                    <path d=\"M19 11a1 1 0 10-2 0 5 5 0 11-10 0 1 1 0 10-2 0 7 7 0 006 6.92V21a1 1 0 102 0v-3.08A7 7 0 0019 11z\" />\n                  </svg>\n                )}\n              </button>\n\n              {showMenu && (\n                <div className=\"chat-menu-dropdown\">\n                  <button\n                    onClick={clearChat}\n                    className=\"menu-item\"\n                  >\n                    <div className=\"menu-icon\">\n                      <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" strokeWidth=\"1.5\" stroke=\"currentColor\" className=\"w-5 h-5\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0\" />\n                      </svg>\n                    </div>\n                    <span>Clear Chat</span>\n                  </button>\n                </div>\n              )}\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nconst UserMessage: React.FC<{ text: string }> = ({ text }) => {\n  return (\n    <div className=\"flex justify-end\">\n      <div className=\"rounded-xl rounded-br-none p-4 shadow-md chat-bubble-user prose text-sm max-w-lg\">\n        <div dangerouslySetInnerHTML={{ __html: marked(text) as string }} />\n      </div>\n    </div>\n  );\n};\n\nconst MessageActions: React.FC<{\n  message: Message;\n}> = ({ message }) => {\n  const [showExportDropdown, setShowExportDropdown] = useState(false);\n  const [showShareModal, setShowShareModal] = useState(false);\n  const [isLiked, setIsLiked] = useState(false);\n  const [isDisliked, setIsDisliked] = useState(false);\n  const dropdownRef = useRef<HTMLDivElement>(null);\n\n  // Close export dropdown when clicking outside\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      if (dropdownRef.current && !dropdownRef.current.contains(event.target as Node)) {\n        setShowExportDropdown(false);\n      }\n    };\n\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, []);\n\n\n  const copyToClipboard = (text: string) => {\n    return new Promise<void>((resolve, reject) => {\n      // Try modern clipboard API first, but with proper error handling\n      if (navigator.clipboard && window.isSecureContext) {\n        navigator.clipboard.writeText(text)\n          .then(() => resolve())\n          .catch(() => {\n            // If clipboard API fails, fall back to textarea method\n            fallbackCopyTextToClipboard(text, resolve, reject);\n          });\n      } else {\n        // Use fallback method directly\n        fallbackCopyTextToClipboard(text, resolve, reject);\n      }\n    });\n  };\n\n  const fallbackCopyTextToClipboard = (text: string, resolve: () => void, reject: (err: any) => void) => {\n    const textArea = document.createElement('textarea');\n    textArea.value = text;\n\n    // Make the textarea out of viewport but still accessible\n    textArea.style.position = 'fixed';\n    textArea.style.left = '-999999px';\n    textArea.style.top = '-999999px';\n    textArea.style.width = '2em';\n    textArea.style.height = '2em';\n    textArea.style.padding = '0';\n    textArea.style.border = 'none';\n    textArea.style.outline = 'none';\n    textArea.style.boxShadow = 'none';\n    textArea.style.background = 'transparent';\n    textArea.setAttribute('readonly', '');\n    textArea.style.userSelect = 'text';\n\n    document.body.appendChild(textArea);\n\n    // Focus and select with better browser compatibility\n    if (textArea.select) {\n      textArea.focus();\n      textArea.select();\n    } else if (textArea.setSelectionRange) {\n      textArea.focus();\n      textArea.setSelectionRange(0, textArea.value.length);\n    }\n\n    try {\n      const successful = document.execCommand('copy');\n      document.body.removeChild(textArea);\n\n      if (successful) {\n        resolve();\n      } else {\n        // Final fallback: try selection API\n        try {\n          const selection = window.getSelection();\n          const range = document.createRange();\n          range.selectNodeContents(textArea);\n          selection?.removeAllRanges();\n          selection?.addRange(range);\n          const copySuccess = document.execCommand('copy');\n          selection?.removeAllRanges();\n\n          if (copySuccess) {\n            resolve();\n          } else {\n            reject(new Error('All copy methods failed'));\n          }\n        } catch (selectionError) {\n          reject(new Error('Copy command and selection both failed'));\n        }\n      }\n    } catch (err) {\n      document.body.removeChild(textArea);\n      reject(err);\n    }\n  };\n\n  const handleCopy = () => {\n    let textToCopy = '';\n\n    // Add question (if available from message context)\n    if (message.query) {\n      textToCopy += `Question: ${message.query}\\n\\n`;\n    }\n\n    // Add answer in plain text\n    const answerText = message.text?.replace(/<[^>]*>/g, '') || '';\n    textToCopy += `Answer:\\n${answerText}\\n\\n`;\n\n    // Add related content images if available\n    if (message.response?.related_content && message.response.related_content.length > 0) {\n      const itemsWithImages = message.response.related_content.filter(item => item.image);\n      if (itemsWithImages.length > 0) {\n        textToCopy += 'Related Images:\\n';\n        itemsWithImages.forEach(item => {\n          textToCopy += `${item.title}: ${item.image}\\n`;\n        });\n        textToCopy += '\\n';\n      }\n    }\n\n    // Add file links if available\n    if (message.response?.file_links && message.response.file_links.length > 0) {\n      textToCopy += 'File Links:\\n';\n      message.response.file_links.forEach(link => {\n        textToCopy += `${link.title}: ${link.url}\\n`;\n      });\n      textToCopy += '\\n';\n    }\n\n    // Add related content page URLs\n    if (message.response?.related_content && message.response.related_content.length > 0) {\n      textToCopy += 'Related Pages:\\n';\n      message.response.related_content.forEach(item => {\n        textToCopy += `${item.title}: ${item.url}\\n`;\n      });\n    }\n\n    copyToClipboard(textToCopy)\n      .then(() => {\n        alert('Content copied to clipboard!');\n      })\n      .catch((err) => {\n        console.error('Copy failed:', err);\n        // Show the content in a modal or alert for manual copying\n        const copyText = `Copy failed due to browser restrictions. Please manually copy this content:\\n\\n${textToCopy}`;\n        alert(copyText);\n      });\n  };\n\n  const buildShareText = () => {\n    const answerText = message.text?.replace(/<[^>]*>/g, '') || '';\n    let text = '';\n    if (message.query) text += `Question: ${message.query}\\n\\n`;\n    text += `Answer:\\n${answerText}`;\n    return text;\n  };\n\n  const openShareModal = () => setShowShareModal(true);\n  const closeShareModal = () => setShowShareModal(false);\n\n  const handleShareWhatsApp = () => {\n    try {\n      const shareText = buildShareText();\n      const url = `https://api.whatsapp.com/send?text=${encodeURIComponent(shareText)}`;\n      window.open(url, '_blank');\n      closeShareModal();\n    } catch (error) {\n      console.error('WhatsApp share failed:', error);\n      alert('Unable to open WhatsApp.');\n    }\n  };\n\n  const handleShareFacebook = () => {\n    try {\n      const shareUrl = encodeURIComponent(window.location.href);\n      const quote = encodeURIComponent(message.query || '');\n      const url = `https://www.facebook.com/sharer/sharer.php?u=${shareUrl}&quote=${quote}`;\n      window.open(url, '_blank');\n      closeShareModal();\n    } catch (error) {\n      console.error('Facebook share failed:', error);\n      alert('Unable to open Facebook.');\n    }\n  };\n\n  const handleShareX = () => {\n    try {\n      const url = encodeURIComponent(window.location.href);\n      const text = encodeURIComponent((message.query ? message.query + ' — ' : '') + 'via Husqy');\n      const intent = `https://twitter.com/intent/tweet?text=${text}&url=${url}`;\n      window.open(intent, '_blank');\n      closeShareModal();\n    } catch (error) {\n      console.error('X share failed:', error);\n      alert('Unable to open X.');\n    }\n  };\n\n  const handleShareEmail = () => {\n    try {\n      const subject = message.query || 'Shared from Husqy';\n      const body = buildShareText() + `\\n\\n${window.location.href}`;\n      const mailto = `mailto:?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;\n      window.location.href = mailto;\n      closeShareModal();\n    } catch (error) {\n      console.error('Email share failed:', error);\n      alert('Email share failed.');\n    }\n  };\n\n  const handleCopyLink = () => {\n    const link = window.location.href;\n    copyToClipboard(link)\n      .then(() => alert('Link copied!'))\n      .catch(() => alert(link));\n  };\n\n  const generatePDF = async () => {\n    try {\n      const buildExportHtml = (): string => {\n        const htmlAnswer = safeRenderMarkdown(\n          renderIcons(\n            renderTables(message.text || '', message.response?.tables || [])\n          )\n        );\n\n        const relatedImages = (message.response?.related_content || [])\n          .filter(i => i.image)\n          .map(i => `<div style=\"margin: 10px 0;\">\n              <div style=\"font-weight:600;color:#374151;margin-bottom:6px;\">${i.title}</div>\n              <img src=\"${i.image}\" alt=\"${i.title}\" style=\"max-width:100%;height:auto;border:1px solid #e5e7eb;border-radius:8px\"/>\n            </div>`)\n          .join('');\n\n        const files = (message.response?.file_links || [])\n          .map(f => `<div style=\"margin:6px 0;\"><span>📄 </span><a href=\"${f.url}\" target=\"_blank\" style=\"color:#2563eb;text-decoration:none;\">${f.title}</a></div>`)\n          .join('');\n\n        const pages = (message.response?.related_content || [])\n          .map(p => `<div style=\"margin:6px 0;\"><span>🔗 </span><a href=\"${p.url}\" target=\"_blank\" style=\"color:#2563eb;text-decoration:none;\">${p.title}</a></div>`)\n          .join('');\n\n        return `\n          <div style=\"padding:24px; font-family: Arial, Helvetica, sans-serif; color:#1f2937;\">\n            ${message.query ? `<h1 style=\"font-size:18px;margin:0 0 16px 0;color:#111827;\">${message.query}</h1>` : ''}\n            <div class=\"answer-block\">${htmlAnswer}</div>\n            ${relatedImages ? `<h2 style=\"font-size:16px;margin:18px 0 8px 0;color:#111827;\">Related Images</h2>${relatedImages}` : ''}\n            ${files ? `<h2 style=\"font-size:16px;margin:18px 0 8px 0;color:#111827;\">Files</h2>${files}` : ''}\n            ${pages ? `<h2 style=\"font-size:16px;margin:18px 0 8px 0;color:#111827;\">Related Pages</h2>${pages}` : ''}\n          </div>\n          <style>\n            .answer-block { margin-top: 8px; }\n            .answer-block table { width:100%; border-collapse: collapse; margin: 12px 0; }\n            .answer-block th, .answer-block td { border: 1px solid #e5e7eb; padding: 8px; text-align:left; }\n            .answer-block thead { background:#f3f4f6; }\n            .answer-block img { max-width: 100%; height:auto; }\n            .answer-block p { margin: 8px 0; }\n            .answer-block ul { margin: 8px 0 8px 16px; }\n            .answer-block ol { margin: 8px 0 8px 16px; }\n            .answer-block h1,.answer-block h2,.answer-block h3 { margin: 12px 0 6px 0; }\n            code { background:#f3f4f6; padding:2px 4px; border-radius:4px; }\n          </style>\n        `;\n      };\n\n      const createTempContainer = (html: string): HTMLDivElement => {\n        const el = document.createElement('div');\n        el.style.position = 'fixed';\n        el.style.left = '-10000px';\n        el.style.top = '0';\n        el.style.width = '800px';\n        el.innerHTML = html;\n        document.body.appendChild(el);\n        return el;\n      };\n\n      const inlineImages = async (root: HTMLElement) => {\n        const imgs = Array.from(root.querySelectorAll('img')) as HTMLImageElement[];\n        const fallback = 'https://hutechsolutions.com/wp-content/uploads/2024/08/hutech-logo-1.svg';\n        await Promise.all(\n          imgs.map(async (img) => {\n            const src = img.getAttribute('src') || '';\n            try {\n              const res = await fetch(src, { mode: 'cors' });\n              if (!res.ok) throw new Error('fetch failed');\n              const blob = await res.blob();\n              const reader = new FileReader();\n              const dataUrl: string = await new Promise((resolve, reject) => {\n                reader.onloadend = () => resolve(reader.result as string);\n                reader.onerror = reject;\n                reader.readAsDataURL(blob);\n              });\n              img.src = dataUrl;\n            } catch {\n              img.src = fallback;\n            }\n          })\n        );\n      };\n\n      const html = buildExportHtml();\n      const container = createTempContainer(html);\n      await inlineImages(container);\n\n      const canvas = await html2canvas(container, { scale: 2, useCORS: true });\n      const imgData = canvas.toDataURL('image/png');\n\n      const pdf = new jsPDF('p', 'pt', 'a4');\n      const pdfWidth = pdf.internal.pageSize.getWidth();\n      const pdfHeight = pdf.internal.pageSize.getHeight();\n      const imgWidth = pdfWidth;\n      const imgHeight = (canvas.height * imgWidth) / canvas.width;\n\n      let heightLeft = imgHeight;\n      let position = 0;\n\n      pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);\n      heightLeft -= pdfHeight;\n\n      while (heightLeft > 0) {\n        position = heightLeft - imgHeight;\n        pdf.addPage();\n        pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);\n        heightLeft -= pdfHeight;\n      }\n\n      pdf.save('hutech-response.pdf');\n      document.body.removeChild(container);\n    } catch (error) {\n      console.error('PDF generation failed:', error);\n      alert('PDF export failed. Please try again.');\n    }\n  };\n\n  const generateMarkdown = () => {\n    try {\n      let markdown = '';\n\n      if (message.query) {\n        markdown += `# ${message.query}\\n\\n`;\n      }\n\n      const answerMd = message.text || '';\n      markdown += `${answerMd}\\n\\n`;\n\n      // Tables as GitHub-flavored Markdown\n      if (message.response?.tables && message.response.tables.length > 0) {\n        message.response.tables.forEach(tbl => {\n          markdown += `\\n### ${tbl.title}\\n\\n`;\n          if (tbl.headers && tbl.headers.length) {\n            markdown += `| ${tbl.headers.join(' | ')} |\\n`;\n            markdown += `| ${tbl.headers.map(() => '---').join(' | ')} |\\n`;\n          }\n          tbl.rows.forEach(row => {\n            markdown += `| ${row.join(' | ')} |\\n`;\n          });\n          markdown += `\\n`;\n        });\n      }\n\n      // Related images\n      if (message.response?.related_content) {\n        const imgs = message.response.related_content.filter(i => i.image);\n        if (imgs.length) {\n          markdown += `\\n## Related Images\\n\\n`;\n          imgs.forEach(i => {\n            markdown += `![${i.title}](${i.image})\\n\\n`;\n          });\n        }\n      }\n\n      // File links\n      if (message.response?.file_links && message.response.file_links.length > 0) {\n        markdown += '\\n## Files\\n\\n';\n        message.response.file_links.forEach(link => {\n          markdown += `- [${link.title}](${link.url})\\n`;\n        });\n      }\n\n      // Related pages\n      if (message.response?.related_content && message.response.related_content.length > 0) {\n        markdown += '\\n## Related Pages\\n\\n';\n        message.response.related_content.forEach(item => {\n          markdown += `- [${item.title}](${item.url})\\n`;\n        });\n      }\n\n      const blob = new Blob([markdown], { type: 'text/markdown' });\n      const url = URL.createObjectURL(blob);\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = 'hutech-response.md';\n      a.click();\n      URL.revokeObjectURL(url);\n    } catch (error) {\n      console.error('Markdown generation failed:', error);\n      alert('Markdown export failed. Please try again.');\n    }\n  };\n\n  const generateDOCX = async () => {\n    try {\n      const children: (Paragraph | DocxTable)[] = [];\n\n      if (message.query) {\n        children.push(new Paragraph({ text: message.query, heading: HeadingLevel.HEADING_1 }));\n        children.push(new Paragraph({ text: '' }));\n      }\n\n      const answerText = (message.text?.replace(/<[^>]*>/g, '') || '').trim();\n      if (answerText) {\n        answerText.split('\\n').forEach(line => {\n          if (line.trim()) children.push(new Paragraph({ text: line }));\n        });\n        children.push(new Paragraph({ text: '' }));\n      }\n\n      // Tables\n      if (message.response?.tables && message.response.tables.length > 0) {\n        message.response.tables.forEach(tbl => {\n          children.push(new Paragraph({ text: tbl.title, heading: HeadingLevel.HEADING_2 }));\n          const rows: TableRow[] = [];\n          if (tbl.headers && tbl.headers.length) {\n            rows.push(\n              new TableRow({\n                children: tbl.headers.map(h => new TableCell({\n                  width: { size: 100 / tbl.headers.length, type: WidthType.PERCENTAGE },\n                  children: [new Paragraph({ children: [new TextRun({ text: h, bold: true })] })],\n                }))\n              })\n            );\n          }\n          tbl.rows.forEach(r => {\n            rows.push(\n              new TableRow({\n                children: r.map(cell => new TableCell({\n                  width: { size: 100 / (tbl.headers?.length || r.length || 1), type: WidthType.PERCENTAGE },\n                  children: [new Paragraph({ text: cell })],\n                }))\n              })\n            );\n          });\n          children.push(new DocxTable({ rows }));\n        });\n      }\n\n      // Images (related content) - export as links for compatibility\n      if (message.response?.related_content) {\n        const imgs = message.response.related_content.filter(i => i.image);\n        if (imgs.length) {\n          children.push(new Paragraph({ text: 'Related Images', heading: HeadingLevel.HEADING_2 }));\n          for (const i of imgs) {\n            children.push(new Paragraph({ text: i.title, heading: HeadingLevel.HEADING_3 }));\n            if (i.image) {\n              children.push(new Paragraph({\n                children: [\n                  new ExternalHyperlink({\n                    children: [new TextRun({ text: i.image, style: 'Hyperlink' })],\n                    link: i.image,\n                  })\n                ]\n              }));\n            }\n          }\n        }\n      }\n\n      // Files\n      if (message.response?.file_links && message.response.file_links.length > 0) {\n        children.push(new Paragraph({ text: 'Files', heading: HeadingLevel.HEADING_2 }));\n        message.response.file_links.forEach(link => {\n          children.push(new Paragraph({\n            children: [\n              new TextRun({ text: `${link.title}: ` }),\n              new ExternalHyperlink({\n                children: [new TextRun({ text: link.url, style: 'Hyperlink' })],\n                link: link.url,\n              }),\n            ]\n          }));\n        });\n      }\n\n      // Related Pages\n      if (message.response?.related_content && message.response.related_content.length > 0) {\n        children.push(new Paragraph({ text: 'Related Pages', heading: HeadingLevel.HEADING_2 }));\n        message.response.related_content.forEach(item => {\n          children.push(new Paragraph({\n            children: [\n              new TextRun({ text: `${item.title}: ` }),\n              new ExternalHyperlink({\n                children: [new TextRun({ text: item.url, style: 'Hyperlink' })],\n                link: item.url,\n              })\n            ]\n          }));\n        });\n      }\n\n      const doc = new DocxDocument({ sections: [{ properties: {}, children }] });\n      const blob = await Packer.toBlob(doc);\n      const url = URL.createObjectURL(blob);\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = 'hutech-response.docx';\n      a.click();\n      URL.revokeObjectURL(url);\n    } catch (error) {\n      console.error('DOCX generation failed:', error);\n      alert('DOCX export failed. Please try again.');\n    }\n  };\n\n  const handleLike = () => {\n    setIsLiked(!isLiked);\n    if (isDisliked) setIsDisliked(false);\n  };\n\n  const handleDislike = () => {\n    setIsDisliked(!isDisliked);\n    if (isLiked) setIsLiked(false);\n  };\n\n  return (\n    <div className=\"message-actions flex items-center justify-between px-4 py-2\">\n      {/* Left side: Share and Export */}\n      <div className=\"flex items-center gap-2\">\n        {/* Share Button opens modal */}\n        <button\n          onClick={openShareModal}\n          className=\"action-button flex items-center gap-1 px-3 py-1.5 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-md transition-colors text-sm\"\n          title=\"Share\"\n        >\n          <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" strokeWidth=\"1.5\" stroke=\"currentColor\" className=\"w-4 h-4\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M7.217 10.907a2.25 2.25 0 100 2.186m0-2.186c.18.324.283.696.283 1.093s-.103.77-.283 1.093m0-2.186l9.566-5.314m-9.566 7.5l9.566 5.314m0 0a2.25 2.25 0 103.935 2.186 2.25 2.25 0 00-3.935-2.186zm0-12.814a2.25 2.25 0 103.933-2.185 2.25 2.25 0 00-3.933 2.185z\" />\n          </svg>\n          Share\n        </button>\n\n        {/* Export Button with Dropdown */}\n        <div className=\"relative\" ref={dropdownRef}>\n          <button\n            onClick={() => setShowExportDropdown(!showExportDropdown)}\n            className=\"action-button flex items-center gap-1 px-3 py-1.5 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-md transition-colors text-sm\"\n            title=\"Export content\"\n          >\n            <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" strokeWidth=\"1.5\" stroke=\"currentColor\" className=\"w-4 h-4\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3\" />\n            </svg>\n            Export\n            <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" strokeWidth=\"1.5\" stroke=\"currentColor\" className=\"w-3 h-3\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M19.5 8.25l-7.5 7.5-7.5-7.5\" />\n            </svg>\n          </button>\n\n          {showExportDropdown && (\n            <div className=\"export-dropdown absolute left-0 top-full mt-1 bg-white rounded-md shadow-lg z-10 min-w-32\">\n              <button\n                onClick={() => {\n                  try {\n                    generatePDF();\n                    setShowExportDropdown(false);\n                  } catch (error) {\n                    console.error('PDF export error:', error);\n                    alert('PDF export failed. Please try again.');\n                  }\n                }}\n                className=\"block w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-100\"\n                title=\"Export as PDF\"\n              >\n                PDF\n              </button>\n              <button\n                onClick={() => {\n                  try {\n                    generateMarkdown();\n                    setShowExportDropdown(false);\n                  } catch (error) {\n                    console.error('Markdown export error:', error);\n                    alert('Markdown export failed. Please try again.');\n                  }\n                }}\n                className=\"block w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-100\"\n                title=\"Export as Markdown\"\n              >\n                Markdown\n              </button>\n              <button\n                onClick={() => {\n                  try {\n                    generateDOCX();\n                    setShowExportDropdown(false);\n                  } catch (error) {\n                    console.error('DOCX export error:', error);\n                    alert('DOCX export failed. Please try again.');\n                  }\n                }}\n                className=\"block w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-100\"\n                title=\"Export as DOCX\"\n              >\n                DOCX\n              </button>\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Right side: Copy, Like, and Dislike */}\n      <div className=\"flex items-center gap-2\">\n        {/* Copy Button */}\n        <button\n          onClick={handleCopy}\n          className=\"action-button flex items-center gap-1 px-3 py-1.5 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-md transition-colors text-sm\"\n          title=\"Copy content\"\n        >\n          <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" strokeWidth=\"1.5\" stroke=\"currentColor\" className=\"w-4 h-4\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M15.666 3.888A2.25 2.25 0 0013.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 01-.75.75H9a.75.75 0 01-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 01-2.25 2.25H6.75A2.25 2.25 0 014.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 011.927-.184\" />\n          </svg>\n          Copy\n        </button>\n\n        {/* Like Button */}\n        <button\n          onClick={handleLike}\n          className={`action-button flex items-center gap-1 px-3 py-1.5 rounded-md transition-colors text-sm ${isLiked ? 'text-blue-600 bg-blue-50' : 'text-gray-600 hover:text-gray-800 hover:bg-gray-100'\n            }`}\n          title=\"Like\"\n        >\n          <svg xmlns=\"http://www.w3.org/2000/svg\" fill={isLiked ? \"currentColor\" : \"none\"} viewBox=\"0 0 24 24\" strokeWidth=\"1.5\" stroke=\"currentColor\" className=\"w-4 h-4\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M6.633 10.5c.806 0 1.533-.446 2.031-1.08a9.041 9.041 0 012.861-2.4c.723-.384 1.35-.956 1.653-1.715a4.498 4.498 0 00.322-1.672V3a.75.75 0 01.75-.75A2.25 2.25 0 0116.5 4.5c0 1.152-.26 2.243-.723 3.218-.266.558.107 1.282.725 1.282h3.126c1.026 0 1.945.694 2.054 1.715.045.422.068.85.068 1.285a11.95 11.95 0 01-2.649 7.521c-.388.482-.987.729-1.605.729H13.48c-.483 0-.964-.078-1.423-.23l-3.114-1.04a4.501 4.501 0 00-1.423-.23H5.904M14.25 9h2.25M5.904 18.75c.083.205.173.405.27.602.398.83 1.169 1.398 2.02 1.398h.716c.83 0 1.598-.481 1.998-1.25a.739.739 0 00.109-.376c0-.621-.504-1.125-1.125-1.125H9.375c-.621 0-1.125.504-1.125 1.125v.375M5.904 18.75L7.5 16.5H5.904z\" />\n          </svg>\n        </button>\n\n        {/* Dislike Button */}\n        <button\n          onClick={handleDislike}\n          className={`action-button flex items-center gap-1 px-3 py-1.5 rounded-md transition-colors text-sm ${isDisliked ? 'text-red-600 bg-red-50' : 'text-gray-600 hover:text-gray-800 hover:bg-gray-100'\n            }`}\n          title=\"Dislike\"\n        >\n          <svg xmlns=\"http://www.w3.org/2000/svg\" fill={isDisliked ? \"currentColor\" : \"none\"} viewBox=\"0 0 24 24\" strokeWidth=\"1.5\" stroke=\"currentColor\" className=\"w-4 h-4 rotate-180\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M6.633 10.5c.806 0 1.533-.446 2.031-1.08a9.041 9.041 0 012.861-2.4c.723-.384 1.35-.956 1.653-1.715a4.498 4.498 0 00.322-1.672V3a.75.75 0 01.75-.75A2.25 2.25 0 0116.5 4.5c0 1.152-.26 2.243-.723 3.218-.266.558.107 1.282.725 1.282h3.126c1.026 0 1.945.694 2.054 1.715.045.422.068.85.068 1.285a11.95 11.95 0 01-2.649 7.521c-.388.482-.987.729-1.605.729H13.48c-.483 0-.964-.078-1.423-.23l-3.114-1.04a4.501 4.501 0 00-1.423-.23H5.904M14.25 9h2.25M5.904 18.75c.083.205.173.405.27.602.398.83 1.169 1.398 2.02 1.398h.716c.83 0 1.598-.481 1.998-1.25a.739.739 0 00.109-.376c0-.621-.504-1.125-1.125-1.125H9.375c-.621 0-1.125.504-1.125 1.125v.375M5.904 18.75L7.5 16.5H5.904z\" />\n          </svg>\n        </button>\n        {/* Share Modal */}\n        {showShareModal && (\n          <div className=\"share-modal-overlay\" role=\"dialog\" aria-modal=\"true\">\n            <div className=\"share-card\" role=\"document\">\n              <div className=\"share-card-header\">\n                <div className=\"share-card-title\">Share</div>\n                <button className=\"share-close\" onClick={closeShareModal} aria-label=\"Close\">×</button>\n              </div>\n              <div className=\"share-options\">\n                <button className=\"share-option\" onClick={handleShareWhatsApp} title=\"WhatsApp\">\n                  <span className=\"share-icon whatsapp\">\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"currentColor\" width=\"24\" height=\"24\"><path d=\"M12 2a10 10 0 00-8.94 14.5L2 22l5.62-1.5A10 10 0 1012 2zm0 18a8 8 0 01-4.1-1.12l-.29-.17-3.33.89.89-3.33-.17-.29A8 8 0 1112 20zm3.71-5.29c-.2-.1-1.17-.58-1.35-.65-.18-.07-.31-.1-.44.1-.13.2-.5.65-.61.79-.11.14-.22.16-.42.06-.2-.1-.83-.31-1.58-.99-.58-.52-.97-1.16-1.09-1.36-.11-.2-.01-.31.08-.41.08-.08.2-.22.29-.33.09-.11.12-.19.18-.31.06-.12.03-.23-.01-.33-.04-.1-.44-1.06-.6-1.45-.16-.38-.32-.33-.44-.34-.11-.01-.23-.01-.35-.01-.12 0-.33.05-.5.23-.17.18-.66.65-.66 1.58 0 .93.68 1.83.78 1.96.1.13 1.33 2.04 3.23 2.86.45.19.8.31 1.07.4.45.14.86.12 1.19.07.36-.05 1.17-.48 1.33-.94.16-.46.16-.85.11-.94-.05-.09-.18-.14-.38-.24z\" /></svg>\n                  </span>\n                  <span className=\"share-label\">WhatsApp</span>\n                </button>\n\n                <button className=\"share-option\" onClick={handleShareFacebook} title=\"Facebook\">\n                  <span className=\"share-icon facebook\">\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"currentColor\" width=\"24\" height=\"24\"><path d=\"M22 12a10 10 0 10-11.5 9.95v-7.04H7.9V12h2.6V9.8c0-2.57 1.53-3.99 3.87-3.99 1.12 0 2.29.2 2.29.2v2.52h-1.29c-1.27 0-1.66.79-1.66 1.6V12h2.83l-.45 2.91h-2.38v7.04A10 10 0 0022 12z\" /></svg>\n                  </span>\n                  <span className=\"share-label\">Facebook</span>\n                </button>\n\n                <button className=\"share-option\" onClick={handleShareX} title=\"X\">\n                  <span className=\"share-icon x\">\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"currentColor\" width=\"24\" height=\"24\"><path d=\"M17.53 2H20l-5.5 6.3L21 22h-6.4l-3.9-6.1L5.9 22H3.4l6-6.9L3 2h6.5l3.5 5.6L17.5 2h.03zM8.2 3.7h-1l8.8 14h1L8.2 3.7z\" /></svg>\n                  </span>\n                  <span className=\"share-label\">X</span>\n                </button>\n\n                <button className=\"share-option\" onClick={handleShareEmail} title=\"Email\">\n                  <span className=\"share-icon email\">\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"currentColor\" width=\"24\" height=\"24\"><path d=\"M20 4H4a2 2 0 00-2 2v12a2 2 0 002 2h16a2 2 0 002-2V6a2 2 0 00-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z\" /></svg>\n                  </span>\n                  <span className=\"share-label\">Email</span>\n                </button>\n\n                <button className=\"share-option\" onClick={handleCopyLink} title=\"Copy link\">\n                  <span className=\"share-icon copy\">\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"currentColor\" width=\"24\" height=\"24\"><path d=\"M16 1H4a2 2 0 00-2 2v12h2V3h12V1zm3 4H8a2 2 0 00-2 2v14a2 2 0 002 2h11a2 2 0 002-2V7a2 2 0 00-2-2zm0 16H8V7h11v14z\" /></svg>\n                  </span>\n                  <span className=\"share-label\">Copy</span>\n                </button>\n              </div>\n\n              <div className=\"share-link-row\">\n                <input className=\"share-link-input\" readOnly value={window.location.href} />\n                <button className=\"share-copy-button\" onClick={handleCopyLink}>Copy</button>\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nconst BotMessage: React.FC<{\n  message: Message;\n  onSuggestionClick: (suggestion: string) => void;\n}> = ({ message, onSuggestionClick }) => {\n  const response = message.response;\n  const answerRef = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    const root = answerRef.current;\n    if (!root) return;\n    const fallback = 'https://hutechsolutions.com/wp-content/uploads/2024/08/hutech-logo-1.svg';\n    const imgs = Array.from(root.querySelectorAll('img')) as HTMLImageElement[];\n    imgs.forEach((img) => {\n      const prev = img.onerror;\n      img.onerror = () => {\n        if (img.src !== fallback) img.src = fallback;\n        if (typeof prev === 'function') try { prev(new Event('error')); } catch { }\n      };\n    });\n  }, [message.text]);\n\n  return (\n    <div className=\"flex items-start justify-center\">\n      <div className=\"max-w-3xl w-full\">\n\n        {/* Related Content Card Carousel */}\n        {response?.related_content && response.related_content.length > 0 && (\n          <RelatedContentCarousel items={response.related_content} />\n        )}\n\n        {/* Main Answer */}\n        {message.text && (\n          <div className=\"p-4 rounded-xl prose text-gray-800\">\n            <div ref={answerRef} dangerouslySetInnerHTML={{\n              __html: safeRenderMarkdown(\n                renderIcons(\n                  renderTables(message.text, response?.tables || [])\n                )\n              )\n            }} />\n          </div>\n        )}\n\n        {/* Action Buttons - Hide for welcome message */}\n        {message.text && message.id !== 1 && (\n          <MessageActions message={message} />\n        )}\n\n        {/* File Links */}\n        {response?.file_links && response.file_links.length > 0 && (\n          <FileLinksSection files={response.file_links} />\n        )}\n\n        {/* Suggested Questions */}\n        {response?.recommendations && response.recommendations.length > 0 && (\n          <SuggestionsSection\n            suggestions={response.recommendations}\n            onSuggestionClick={onSuggestionClick}\n          />\n        )}\n      </div>\n    </div>\n  );\n};\n\nconst LoadingMessage: React.FC = () => {\n  return (\n    <div className=\"flex justify-start\">\n      <div className=\"rounded-xl rounded-bl-none p-4 shadow-md max-w-sm bg-white\">\n        <div className=\"flex space-x-2 animate-pulse\">\n          <div className=\"w-2 h-2 bg-gray-400 rounded-full\"></div>\n          <div className=\"w-2 h-2 bg-gray-400 rounded-full\"></div>\n          <div className=\"w-2 h-2 bg-gray-400 rounded-full\"></div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nconst RelatedContentCarousel: React.FC<{ items: RelatedContent[] }> = ({ items }) => {\n  const [canScrollLeft, setCanScrollLeft] = useState(false);\n  const [canScrollRight, setCanScrollRight] = useState(true);\n  const containerRef = useRef<HTMLDivElement>(null);\n\n\n  // Function to get favicon URL for a website\n  const getFaviconUrl = (websiteUrl: string): string => {\n    try {\n      const urlObj = new URL(websiteUrl);\n      const domain = urlObj.hostname;\n      // Use Google's favicon service for reliable favicon fetching\n      return `https://www.google.com/s2/favicons?domain=${domain}&sz=16`;\n    } catch {\n      return '';\n    }\n  };\n\n  const scrollLeft = () => {\n    if (containerRef.current) {\n      const scrollAmount = 200;\n      containerRef.current.scrollBy({ left: -scrollAmount, behavior: 'smooth' });\n    }\n  };\n\n  const scrollRight = () => {\n    if (containerRef.current) {\n      const scrollAmount = 200;\n      containerRef.current.scrollBy({ left: scrollAmount, behavior: 'smooth' });\n    }\n  };\n\n  const handleScroll = () => {\n    if (containerRef.current) {\n      const { scrollLeft, scrollWidth, clientWidth } = containerRef.current;\n      setCanScrollLeft(scrollLeft > 0);\n      setCanScrollRight(scrollLeft < scrollWidth - clientWidth - 1);\n    }\n  };\n\n  useEffect(() => {\n    const container = containerRef.current;\n    if (container) {\n      container.addEventListener('scroll', handleScroll);\n      handleScroll(); // Initial check\n      return () => container.removeEventListener('scroll', handleScroll);\n    }\n  }, []);\n\n  return (\n    <div className=\"w-full mb-6\">\n      <h5 className=\"font-semibold text-gray-800 mb-2 px-4\">Related content</h5>\n      <div className=\"related-content-carousel-wrapper\">\n        <button\n          onClick={scrollLeft}\n          disabled={!canScrollLeft}\n          className={`carousel-nav-button carousel-nav-left ${!canScrollLeft ? 'disabled' : ''}`}\n        >\n          <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" strokeWidth=\"2\" stroke=\"currentColor\" className=\"w-5 h-5\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M15.75 19.5L8.25 12l7.5-7.5\" />\n          </svg>\n        </button>\n\n        <div\n          ref={containerRef}\n          className=\"related-content-horizontal-container\"\n        >\n          {items.map((item, index) => (\n            <a\n              key={index}\n              href={item.url}\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              className=\"related-content-mini-card\"\n            >\n              <div className=\"mini-card-favicon\">\n                <img\n                  src={getFaviconUrl(item.url)}\n                  alt={`${new URL(item.url).hostname} favicon`}\n                  className=\"favicon-image\"\n                  onError={(e) => {\n                    // Replace with fallback icon if favicon fails\n                    const target = e.target as HTMLImageElement;\n                    target.style.display = 'none';\n                    const fallback = target.nextElementSibling as HTMLElement;\n                    if (fallback) fallback.style.display = 'flex';\n                  }}\n                />\n                <div className=\"favicon-fallback\" style={{ display: 'none' }}>\n                  🔗\n                </div>\n              </div>\n              <div className=\"mini-card-content\">\n                <div className=\"mini-card-hostname\">\n                  {new URL(item.url).hostname.replace('www.', '')}\n                </div>\n                <div className=\"mini-card-title\">{item.title}</div>\n              </div>\n            </a>\n          ))}\n        </div>\n\n        <button\n          onClick={scrollRight}\n          disabled={!canScrollRight}\n          className={`carousel-nav-button carousel-nav-right ${!canScrollRight ? 'disabled' : ''}`}\n        >\n          <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" strokeWidth=\"2\" stroke=\"currentColor\" className=\"w-5 h-5\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M8.25 4.5l7.5 7.5-7.5 7.5\" />\n          </svg>\n        </button>\n      </div>\n    </div>\n  );\n};\n\nconst FileLinksSection: React.FC<{ files: FileLink[] }> = ({ files }) => {\n  return (\n    <div className=\"mt-6\">\n      <h5 className=\"font-semibold text-gray-800 mb-2 px-4\">Files</h5>\n      {files.map((file, index) => (\n        <a\n          key={index}\n          href={file.url}\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n          className=\"flex items-center gap-2 p-3 my-1 rounded-lg hover:bg-gray-100 transition-colors duration-200\">\n          <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5 text-gray-500\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n            <path d=\"M4 4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V8a2 2 0 00-2-2h-5L9 4H4z\" />\n          </svg>\n          <span className=\"text-sm font-medium text-gray-700\">{file.title}</span>\n        </a>\n      ))}\n    </div>\n  );\n};\n\nconst SuggestionsSection: React.FC<{\n  suggestions: string[];\n  onSuggestionClick: (suggestion: string) => void;\n}> = ({ suggestions, onSuggestionClick }) => {\n  const [clickedSuggestions, setClickedSuggestions] = useState<Set<string>>(new Set());\n\n  const handleSuggestionClick = (suggestion: string) => {\n    // Mark this suggestion as clicked\n    setClickedSuggestions(prev => new Set(prev.add(suggestion)));\n    // Call the original click handler\n    onSuggestionClick(suggestion);\n  };\n\n  return (\n    <div className=\"mt-6\">\n      <h5 className=\"font-semibold text-gray-800 mb-3 px-4\">Suggested Questions</h5>\n      <div className=\"px-4\">\n        {suggestions.map((suggestion, index) => (\n          <button\n            key={index}\n            onClick={() => handleSuggestionClick(suggestion)}\n            className={`suggestion-button flex items-center justify-between w-full text-left text-sm ${clickedSuggestions.has(suggestion) ? 'clicked' : 'text-gray-700'\n              }`}>\n            <span>{suggestion}</span>\n            <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" strokeWidth=\"2\" stroke=\"currentColor\" className=\"w-4 h-4\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M12 4.5v15m7.5-7.5h-15\" />\n            </svg>\n          </button>\n        ))}\n      </div>\n    </div>\n  );\n};\n\n// Utility functions\nconst safeRenderMarkdown = (content: string): string => {\n  try {\n    // Process the content through our preprocessing pipeline\n    const processed = preprocessResponse(content);\n\n    // Convert to HTML using marked\n    const html = marked(processed) as string;\n\n    // Basic XSS protection - remove dangerous attributes and scripts\n    let safeHtml = html\n      .replace(/<script\\b[^<]*(?:(?!<\\/script>)<[^<]*)*<\\/script>/gi, '')\n      .replace(/javascript:/gi, '')\n      .replace(/on\\w+=\"[^\"]*\"/gi, '')\n      .replace(/on\\w+='[^']*'/gi, '');\n\n    // Fix cases where a leading '#' remains inside heading tags\n    safeHtml = safeHtml.replace(/<(h[1-6])(\\b[^>]*)>#{1,6}\\s+/gi, '<$1$2>');\n    // Remove any empty headings that may have been introduced\n    safeHtml = safeHtml.replace(/<h[1-6][^>]*>\\s*<\\/h[1-6]>/gi, '');\n\n    return safeHtml;\n  } catch (error) {\n    console.error('Error rendering markdown:', error);\n    return content; // Fallback to plain text\n  }\n};\n\nconst renderTables = (answer: string, tables: Table[]): string => {\n  if (!tables || tables.length === 0) {\n    return answer;\n  }\n\n  let processedAnswer = answer;\n  tables.forEach(table => {\n    const placeholder = `[TABLE:${table.title}]`;\n    if (processedAnswer.includes(placeholder)) {\n      let tableHtml = `<div class=\"overflow-x-auto my-4\">`;\n      tableHtml += `<table class=\"min-w-full border border-gray-300 rounded-lg overflow-hidden shadow-sm\">`;\n      tableHtml += `<caption class=\"p-2 text-sm text-gray-500 font-medium text-left\">${table.title}</caption>`;\n\n      if (table.headers && table.headers.length > 0) {\n        tableHtml += `<thead class=\"bg-gray-100\">`;\n        tableHtml += `<tr>${table.headers.map(h => `<th class=\"p-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider\">${h}</th>`).join('')}</tr>`;\n        tableHtml += `</thead>`;\n      }\n\n      tableHtml += `<tbody class=\"divide-y divide-gray-200\">`;\n      table.rows.forEach(row => {\n        tableHtml += `<tr class=\"bg-white\">`;\n        tableHtml += row.map(cell => `<td class=\"p-3 text-sm text-gray-800\">${cell}</td>`).join('');\n        tableHtml += `</tr>`;\n      });\n      tableHtml += `</tbody>`;\n      tableHtml += `</table></div>`;\n\n      processedAnswer = processedAnswer.replace(placeholder, tableHtml);\n    }\n  });\n\n  return processedAnswer;\n};\n\nconst getIconSVG = (iconName: string): string => {\n  const icons: { [key: string]: string } = {\n    location: `<svg xmlns=\"http://www.w3.org/2000/svg\" class=\"inline-block w-5 h-5\" viewBox=\"0 0 24 24\"><path fill=\"currentColor\" d=\"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5S10.62 6.5 12 6.5s2.5 1.12 2.5 2.5S13.38 11.5 12 11.5z\"/></svg>`,\n    phone: `<svg xmlns=\"http://www.w3.org/2000/svg\" class=\"inline-block w-5 h-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M2 6.5c1.5-2 4-3 6.5-2l2 2a1 1 0 010 1.4L9 10a12 12 0 005 5l2.1-1.5a1 1 0 011.4 0l2 2c1 2.5 0 5-2 6.5-.6.4-1.4.5-2.1.2C10.2 20.5 3.5 13.8 1.8 6.6c-.3-.7-.2-1.5.2-2.1z\"/></svg>`,\n    mobile: `<svg xmlns=\"http://www.w3.org/2000/svg\" class=\"inline-block w-5 h-5\" viewBox=\"0 0 24 24\"><path fill=\"currentColor\" d=\"M15.5 1h-7a.5.5 0 00-.5.5v21a.5.5 0 00.5.5h7a.5.5 0 00.5-.5V1.5a.5.5 0 00-.5-.5zM12 22a1 1 0 110-2 1 1 0 010 2z\"/></svg>`,\n    email: `<svg xmlns=\"http://www.w3.org/2000/svg\" class=\"inline-block w-5 h-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M3 5h18a2 2 0 012 2v10a2 2 0 01-2 2H3a2 2 0 01-2-2V7a2 2 0 012-2z\" /><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M3 7l9 6 9-6\" /></svg>`\n  };\n  return icons[iconName] || '';\n};\n\nconst renderIcons = (text: string): string => {\n  return text.replace(/\\[ICON:(.*?)]/g, (match, iconName) => {\n    return `<span class=\"inline-block align-middle\">${getIconSVG(iconName.trim())}</span>`;\n  });\n};\n\nconst preprocessResponse = (text: string): string => {\n  let processedText = text.replace(/&nbsp;|\\u00A0|\\t/g, ' ');\n  processedText = processedText.replace(/([^\\n])---/g, '$1\\n\\n---\\n\\n');\n  processedText = processedText.replace(/^(\\s*)\\*\\s+/gm, '$1* ');\n  processedText = processedText.replace(/^(#+)(?! )/gm, '$1 ');\n  processedText = processedText.replace(/^(\\s*>)(?! )/gm, '$1 ');\n  return processedText.trim();\n};\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}